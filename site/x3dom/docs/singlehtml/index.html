
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>X3DOM v1.5.1 documentation</title>
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="None" href="#" />
   
    
    <script src="http://x3dom.org/download/dev/x3dom-full.js"></script>
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />

  </head>
  <body>

  
  
  <div class=indexwrapper>
  

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="#">X3DOM v1.5.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="welcome-to-x3dom">
<h1>Welcome to X3DOM<a class="headerlink" href="#welcome-to-x3dom" title="Permalink to this headline">¶</a></h1>
<p>Welcome to X3DOM&#8217;s documentation. This documentation is divided into different
parts: Guide, Reference and Notes. We recommend that you read
the <a class="reference internal" href="index.html#gettingstarted"><em>Getting started</em></a> section of the Guide first.
Besides the getting started there is also a more detailed <a class="reference internal" href="index.html#firststeps"><em>First steps with X3DOM</em></a>
tutorial that shows how to create complete (albeit small) application.
If you&#8217;d rather dive into the internals of X3DOM, check out
the <a class="reference internal" href="index.html#runtime-api"><em>API</em></a> documentation.</p>
<div class="section" id="guide">
<h2>Guide<a class="headerlink" href="#guide" title="Permalink to this headline">¶</a></h2>
<p>This part of the documentation, which is mostly prose, begins with some
basic information about X3DOM, then focuses on step-by-step
instructions for building applications with X3DOM.</p>
<div class="toctree-wrapper compound">
<span id="document-gettingstarted"></span><div class="section" id="getting-started">
<span id="gettingstarted"></span><h3>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h3>
<div class="section" id="using-x3dom">
<h4>Using X3DOM<a class="headerlink" href="#using-x3dom" title="Permalink to this headline">¶</a></h4>
<p>The recommended way of using X3DOM during the development of your
application is linking the online version within your HTML
document. You can use the following boiler-plate to kick-start
development:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">encoding=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://www.x3dom.org/download/dev/x3dom.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;http://www.x3dom.org/download/dev/x3dom.css&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;x3d&gt;</span> ...<span class="nt">&lt;/x3d&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>X3DOM should be usable in all modern browser and depends on no external
libraries.</p>
<p>Please be aware that hot-linking the X3DOM library as outlined
above will give you the cutting-edge build of the library with all pros
and cons. You will recieve the latestest fixes and features, but also
a potentially unstable or temporarliy broken version. We try to maintain
a unbroken dev build, but that can&#8217;t be guaranteed all the time.</p>
<p>Once you finished developing your application, you should download
the necessary snapshot build and deploy the files with your application
on your server or a CDN. All you need in order to make it work are the
following files:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">x3dom.js</span></tt></td>
<td>The minified X3DOM library in a given version.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">x3dom.css</span></tt></td>
<td>Stylesheets for X3DOM, you need to include this file
in your webpage in order for X3DOM to display.
However you can also take it as template to
adapt your own stylesheet.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">x3dom.swf</span></tt></td>
<td>The Flash 11 integration, for browsers not supporting
native X3DOM or WebGL.</td>
</tr>
</tbody>
</table>
<p>You can <a class="reference external" href="http://x3dom.org/download/">download the files from the X3DOM server</a>
and put them on your harddisk or your webserver. The released versions reside
in subdirectories with version numbers, for example version 1.4 is available
at <a class="reference external" href="http://x3dom.org/download/1.4/">1.4/</a>. For the current development build
you can use the shortcut <a class="reference external" href="http://x3dom.org/download/dev/">dev/</a> it will always point
to the latest released version.</p>
</div>
<div class="section" id="releases-dev-builds-and-library-management">
<h4>Releases, dev builds and library management<a class="headerlink" href="#releases-dev-builds-and-library-management" title="Permalink to this headline">¶</a></h4>
<p>Since X3DOM is a research project our official release cycle is fairly long.
In order to keep your application up-to date with any browser related
incompatibilities, you need to manage a local copy of the X3DOM development
build along with your application. In other words: the released versions are
not maintained. Therefore the following release/library management on your
side might be one sensible approach:</p>
<blockquote>
<div><ul class="simple">
<li>Use the dev build during development of your application</li>
<li>Use the released version if you deploy in a controlled environment
(Browser and OS versions)</li>
<li>Freeze the dev build (or use a release in a controlled environment) and
deploy that freezed version anlongside your application on your server or CDN</li>
<li>If browser issues occur, use the latest X3DOM dev build and test your
application thourougly.</li>
<li>Monitor your environment regulary and perform your own tests with all
browser versions and OS combinations your application is targed for as
soon as a X3DOM or browser changes occur</li>
</ul>
</div></blockquote>
<p>It should be stressed that X3DOM as well as browser development is a moving
target. It is only sensible to adjust your development and library management
processes to this environment.</p>
</div>
<div class="section" id="development-builds">
<h4>Development builds<a class="headerlink" href="#development-builds" title="Permalink to this headline">¶</a></h4>
<p>If you want to work with the latest development build of X3DOM (which in fact
is recommended), then <a class="reference external" href="http://x3dom.org/download/dev/">download the latest builds from the X3DOM server here</a>.</p>
<p>The development build is automatically created every night and will contain
many fixes and features not available to the released versions. We try to
keep the development build at a working stage and not break compatibility
with released versions. However, a working dev build can not be guaranteed
all the time.</p>
</div>
<div class="section" id="build-your-own">
<h4>Build your own<a class="headerlink" href="#build-your-own" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> If you wish to use a rather recent version of X3DOM and do not want
to tinker with the build process, just use the development build. If you
like to work on X3DOM itself, use the instructions set forth in this
chapter.</p>
<p>All source code to X3DOM is kept under the Git revision control and you can
<a class="reference external" href="http://github.com/x3dom/x3dom/">browse the repository</a> online. There is a
download link available for any file or directory, if you only nee a portion
of the X3DOM code.</p>
<p>If you have access to Git, you can get a copy of the repository here:</p>
<div class="highlight-python"><pre>git clone https://github.com/x3dom/x3dom.git</pre>
</div>
<p>You can also check out a specific release from GitHub:</p>
<div class="highlight-python"><pre>git clone https://github.com/x3dom/x3dom.git
git checkout &lt;version&gt;
e.g. git checkout 1.3.0</pre>
</div>
<p>If you want to build your own copy of X3DOM from the Git repository, you
need to build it from the sources.</p>
<div class="section" id="build-requirements">
<h5>Build requirements<a class="headerlink" href="#build-requirements" title="Permalink to this headline">¶</a></h5>
<p>X3DOM currently requires the following components to be installed on your
computer:</p>
<ul class="simple">
<li><a class="reference external" href="http://python.org">Python</a>: The Python programming language is
available for all major platforms. The recommended version is 2.7,
but 2.6 works fine too.</li>
<li><a class="reference external" href="http://sphinx.pocoo.org/">Sphinx</a>: A documentation tool, you will
need this in order to build the documentation. Sphinx is a Python
package and can be installed by running <tt class="docutils literal"><span class="pre">easy_install</span> <span class="pre">sphinx</span></tt>.</li>
<li><a class="reference external" href="http://pypi.python.org/pypi/argparse">argparse</a>: For Python 2.6 or earlier.</li>
</ul>
<p>Once you have all prerequisites installed, you can build X3DOM:</p>
<div class="highlight-python"><pre>python manage.py --build</pre>
</div>
<p>The resulting build will be written to the <tt class="docutils literal"><span class="pre">dist/</span></tt> directory.</p>
<p>Fore more detailed information on working with the source, please see
the <a class="reference external" href="http://github.com/x3dom/x3dom/wiki">developer wiki</a>.</p>
</div>
</div>
</div>
<span id="document-tutorial/index"></span><div class="section" id="tutorial">
<span id="id1"></span><h3>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h3>
<p>You want to develop an application with X3DOM? Here you have the chance to
learn that by example. In these tutorials we will create simple applications
of different kinds, but they still feature everything you need to get started.</p>
<p><strong>Basic operation</strong></p>
<div class="toctree-wrapper compound">
<span id="document-tutorial/firststeps"></span><div class="section" id="first-steps-with-x3dom">
<span id="firststeps"></span><h4>First steps with X3DOM<a class="headerlink" href="#first-steps-with-x3dom" title="Permalink to this headline">¶</a></h4>
<p>This tutorial is intended to be a quick start for people who have no experience with 3D graphics so far but want to try out X3DOM. Those who want to learn more about it, should have a look at the book <a class="reference external" href="http://x3dgraphics.com/">X3D: Extensible 3D Graphics for Web Authors</a> about X3D, on which X3DOM is based, by Don Brutzman and Leonard Daly.</p>
<p>Authoring X3DOM content is very similar to authoring HTML. So just open an editor and start with the  usual stuff as shown next. Please note the <tt class="docutils literal"><span class="pre">&lt;link&gt;</span></tt> tag, which includes the X3DOM stylesheet for having everything nicely formatted, and the <tt class="docutils literal"><span class="pre">&lt;script&gt;</span></tt> tag, which includes all JavaScript functions that are necessary to run your 3D scene:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>My first X3DOM page<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span>
          <span class="na">href=</span><span class="s">&quot;http://www.x3dom.org/download/x3dom.css&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/link&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span>
            <span class="na">src=</span><span class="s">&quot;http://www.x3dom.org/download/x3dom.js&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>My X3DOM world<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      This is my first html page with some 3d objects.
    <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Save your file and open it in an <a class="reference external" href="http://www.x3dom.org/?page_id=9">WebGL capable browser</a>. As you can see, there is only some text. What’s missing are the X3DOM-specific tags for specifying the 3D objects.</p>
<p>Hence, we’ll now insert a red box into our page by inserting the following code after the closing <tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt> tag. Similar to a <tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt> or <tt class="docutils literal"><span class="pre">&lt;div&gt;</span></tt> element, the <tt class="docutils literal"><span class="pre">&lt;x3d&gt;</span></tt> element defines a rectangular region that contains all its children elements (in this case the red box).</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;x3d</span> <span class="na">width=</span><span class="s">&quot;500px&quot;</span> <span class="na">height=</span><span class="s">&quot;400px&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;scene&gt;</span>
    <span class="nt">&lt;shape&gt;</span>
      <span class="nt">&lt;appearance&gt;</span>
        <span class="nt">&lt;material</span> <span class="na">diffuseColor=</span><span class="s">&#39;red&#39;</span><span class="nt">&gt;&lt;/material&gt;</span>
      <span class="nt">&lt;/appearance&gt;</span>
      <span class="nt">&lt;box&gt;&lt;/box&gt;</span>
    <span class="nt">&lt;/shape&gt;</span>
  <span class="nt">&lt;/scene&gt;</span>
<span class="nt">&lt;/x3d&gt;</span>
</pre></div>
</div>
<p>You might wonder, why the <tt class="docutils literal"><span class="pre">&lt;box&gt;</span></tt> tag isn’t enough and what the other tags are good for. <tt class="docutils literal"><span class="pre">&lt;scene&gt;</span></tt> simply says, that you are going to define a 3D scene. And a <tt class="docutils literal"><span class="pre">&lt;shape&gt;</span></tt> defines the geometry (here a <tt class="docutils literal"><span class="pre">&lt;box&gt;</span></tt>) as well as the <tt class="docutils literal"><span class="pre">&lt;appearance&gt;</span></tt> of an object. In our example, the whole appearance only consists of a red <tt class="docutils literal"><span class="pre">&lt;material&gt;</span></tt>. If you want to learn more about these elements (or nodes as they are called in X3D), just follow <a class="reference external" href="http://x3dom.org/download/dumpNodeTypeTree.html">this link</a> and click on the node you are interested in.</p>
<p>Because simply looking at one side of the box is bit boring, you can navigate within your scene with the help of the mouse. If you move the mouse with pressed left mouse button inside the area surrounded by a black border, you’ll rotate the point of view. With the middle mouse button you can pan around and with the right button you can zoom in and out. For more information see:  <a class="reference internal" href="index.html#navigation"><em>Camera Navigation</em></a>.</p>
<p>Ok, now you can move around, but admittedly this scene still is sort of boring. Thus, we’ll add another object, a blue <tt class="docutils literal"><span class="pre">&lt;sphere&gt;</span></tt>, into our little scene. As is shown next, the <tt class="docutils literal"><span class="pre">&lt;shape&gt;</span></tt> is now surrounded by another element, the <tt class="docutils literal"><span class="pre">&lt;transform&gt;</span></tt> tag. This is necessary, because otherwise both objects would appear at the same position, namely the virtual origin of the 3D scene.</p>
<p>Thereto, the ‘translation’ attribute of the first <tt class="docutils literal"><span class="pre">&lt;transform&gt;</span></tt> element moves the box two units to the left, and the ‘translation’ attribute of the second <tt class="docutils literal"><span class="pre">&lt;transform&gt;</span></tt> element moves the sphere two units to the right. As can be seen in the example below, the value of the ‘translation’ attribute consists of three numbers. The first denotes the local x-axis (movement to the left/ right), the second defines the movement along the local y-axis (up/ down), and the third defines the movement along the local z-axis (back/ front).</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;x3d</span> <span class="na">width=</span><span class="s">&quot;500px&quot;</span> <span class="na">height=</span><span class="s">&quot;400px&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;scene&gt;</span>
    <span class="nt">&lt;transform</span> <span class="na">translation=</span><span class="s">&quot;-2 0 0&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;shape&gt;</span>
        <span class="nt">&lt;appearance&gt;</span>
          <span class="nt">&lt;material</span> <span class="na">diffuseColor=</span><span class="s">&#39;red&#39;</span><span class="nt">&gt;&lt;/material&gt;</span>
        <span class="nt">&lt;/appearance&gt;</span>
        <span class="nt">&lt;box&gt;&lt;/box&gt;</span>
      <span class="nt">&lt;/shape&gt;</span>
    <span class="nt">&lt;/transform&gt;</span>
    <span class="nt">&lt;transform</span> <span class="na">translation=</span><span class="s">&quot;2 0 0&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;shape&gt;</span>
        <span class="nt">&lt;appearance&gt;</span>
          <span class="nt">&lt;material</span> <span class="na">diffuseColor=</span><span class="s">&#39;blue&#39;</span><span class="nt">&gt;&lt;/material&gt;</span>
        <span class="nt">&lt;/appearance&gt;</span>
        <span class="nt">&lt;sphere&gt;&lt;/sphere&gt;</span>
      <span class="nt">&lt;/shape&gt;</span>
    <span class="nt">&lt;/transform&gt;</span>
  <span class="nt">&lt;/scene&gt;</span>
<span class="nt">&lt;/x3d&gt;</span>
</pre></div>
</div>
<p>Now you know the basics of X3DOM. As you might have expected, there are certainly more nodes or elements you can try out like the <tt class="docutils literal"><span class="pre">&lt;cone&gt;</span></tt> or the <tt class="docutils literal"><span class="pre">&lt;cylinder&gt;</span></tt>. Also, there are other material properties like ‘specularColor’ and ‘transparency’. By applying an <tt class="docutils literal"><span class="pre">&lt;imageTexture&gt;</span></tt> to your object, you can achieve fancy effects like a teapot that looks like earth as demonstrated in <a class="reference external" href="http://x3dom.org/x3dom/example/x3dom_objectAndText.xhtml">this example</a>. When you have a look at the example’s source code, you’ll find a new tag called <tt class="docutils literal"><span class="pre">&lt;indexedFaceSet&gt;</span></tt>, which can be used for creating arbitrary kinds of geometry.</p>
<p>The example discussed here is also <a class="reference external" href="http://www.x3dom.org/x3dom/example/x3dom_gettingStarted.html">available online</a>. Moreover, there are already lots of other <a class="reference external" href="http://www.x3dom.org/?page_id=5">X3DOM examples</a>. Just try them out, and even more important, have a look at the source code to learn what’s going on.</p>
<p>Please note, that there are slight differences between XHTML and HTML encoding: e.g. the latter does not yet work with self-closing tags but requires that tags are always closed in the form <tt class="docutils literal"><span class="pre">&lt;/tagName&gt;</span></tt>.</p>
<p>If you ever have problems, please first check the <a class="reference internal" href="index.html#troubleshooting"><em>Troubleshooting</em></a> section of this guide, much helpful information is collected there.</p>
</div>
<span id="document-tutorial/styling"></span><div class="section" id="styling-with-css">
<span id="styling"></span><h4>Styling with CSS<a class="headerlink" href="#styling-with-css" title="Permalink to this headline">¶</a></h4>
<p>This tutorial guides you through the process of using CSS with X3DOM. In order to demonstrate the functionality, we are going to create a HTML document with a X3DOM scene. That scene is then amended with a button that allows to resize the scene by setting CSS attributes using JavaScript.</p>
<p>Important: you should always include the X3DOM default stylesheet <tt class="docutils literal"><span class="pre">x3dom.css</span></tt>, since it initializes some important settings necessary due to the fact that X3DOM&#8217;s new 3D elements are unknown to the Browser and so are their styles. For example, if the <tt class="docutils literal"><span class="pre">&lt;x3d&gt;</span></tt> element is not floating (e.g. using the <cite>float:left</cite> property), the relative mouse positions cannot be calculated correctly and picking does not work!</p>
<div class="section" id="basic-scene-document">
<h5>Basic scene document<a class="headerlink" href="#basic-scene-document" title="Permalink to this headline">¶</a></h5>
<p>We are going to use the box example scene established in the <a class="reference internal" href="index.html#firststeps"><em>First steps with X3DOM</em></a> tutorial:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>CSS Integration Test<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;http://www.x3dom.org/download/x3dom.css&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://www.x3dom.org/download/x3dom.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Styling tutorial<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;x3d</span> <span class="na">width=</span><span class="s">&quot;400px&quot;</span> <span class="na">height=</span><span class="s">&quot;300px&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;scene&gt;</span>
        <span class="nt">&lt;shape&gt;</span>
          <span class="nt">&lt;appearance&gt;</span>
            <span class="nt">&lt;material</span> <span class="na">diffuseColor=</span><span class="s">&#39;red&#39;</span><span class="nt">&gt;&lt;/material&gt;</span>
          <span class="nt">&lt;/appearance&gt;</span>
          <span class="nt">&lt;box&gt;&lt;/box&gt;</span>
        <span class="nt">&lt;/shape&gt;</span>
      <span class="nt">&lt;/scene&gt;</span>
    <span class="nt">&lt;/x3d&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Rendering this document in a <a class="reference external" href="http://www.x3dom.org/?page_id=9">WebGL compatible browser</a>, results in a look similar to this:</p>
<img alt="_images/styling1.png" src="_images/styling1.png" />
</div>
<div class="section" id="basic-styling">
<h5>Basic styling<a class="headerlink" href="#basic-styling" title="Permalink to this headline">¶</a></h5>
<p>In the initial example above, we created the scene using the <tt class="docutils literal"><span class="pre">&lt;x3d&gt;</span></tt> tag initializing it with <tt class="docutils literal"><span class="pre">`width`</span></tt> and <tt class="docutils literal"><span class="pre">`height`</span></tt> attributes. In order to take advantage of CSS, we can use a CSS rule to set height and width in the visual layer.</p>
<p>The following CSS rules, added to the <tt class="docutils literal"><span class="pre">&lt;head&gt;</span></tt> of the HTML document element will resize the scene to 50% height and with of the parent element - in this case the <tt class="docutils literal"><span class="pre">body</span></tt> element. In order to make this work with IDs, we need to add the <tt class="docutils literal"><span class="pre">`id`</span></tt> attribute to the <tt class="docutils literal"><span class="pre">&lt;x3d&gt;</span></tt> element:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;style&gt;</span>
    <span class="nf">#the_element</span> <span class="p">{</span>
      <span class="k">width</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
      <span class="k">height</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
...
<span class="nt">&lt;x3d</span> <span class="na">id=</span><span class="s">&quot;the_element&quot;</span><span class="nt">&gt;</span>
...
</pre></div>
</div>
<p>We need to remove the <tt class="docutils literal"><span class="pre">width</span></tt> and <tt class="docutils literal"><span class="pre">height</span></tt> attributes as well because they take precedence over the CSS rules. In order to change the background of the WebGL viewport we add the CSS background rule. To make this work, the scene must be transparent (default). If you change the background in the X3D definition, it will not be visible because it is disguised by the X3D background.</p>
<div class="highlight-css"><div class="highlight"><pre><span class="nf">#the_element</span> <span class="p">{</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="k">background</span><span class="o">:</span><span class="m">#000</span> <span class="sx">url(http://www.x3dom.org/x3dom/example/texture/solarSystem/starsbg.png)</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>The result looks something like this:</p>
<img alt="_images/styling2.png" src="_images/styling2.png" />
<p>Note that the dimensions are relative now and adapted when resizing the browser window.</p>
<ul class="simple">
<li><a class="reference external" href="../_static/tutorial/styling/styling2.mov">View demo video</a></li>
<li><a class="reference external" href="../_static/tutorial/styling/styling2.html">View live example</a></li>
</ul>
</div>
<div class="section" id="adding-interaction">
<h5>Adding interaction<a class="headerlink" href="#adding-interaction" title="Permalink to this headline">¶</a></h5>
<p>The dynamic resizing showed in the last chapter is great for automatically adapting to browser resize and for positioning elements in your layout. In order to add more elaborate interaction with the scene, we can use JavaScript. For example, to change the dimensions of the X3D element so we can resize it to &#8220;fullscreen&#8221; like the ubiquitous video player.</p>
<p>In order to achieve this we are going to add a button to our example that allows to switch our X3D element to fullscreen – or more precisely to 100% of the parent HTML element.</p>
<p>First step is adding a piece of markup that we can use for styling as a button. Fortunately there already is a HTML element that is meant for exactly this purpose: <tt class="docutils literal"><span class="pre">&lt;button&gt;</span></tt>. And since we move in a HTML5 context, we put the button element within the <tt class="docutils literal"><span class="pre">&lt;x3d&gt;</span></tt> element:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;x3d</span> <span class="na">id=</span><span class="s">&quot;the_element&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">&quot;toggler&quot;</span><span class="nt">&gt;</span>Zoom<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;scene&gt;</span>
    ...
<span class="nt">&lt;/x3d&gt;</span>
</pre></div>
</div>
<p>Semantically we are fine, but now we need to style the button so it floats over the scene. The following style rules will accomplish this. Please note the <cite>position: relative</cite> property we are setting on the <tt class="docutils literal"><span class="pre">x3d</span></tt> element. We need this to allow absolute positioning of the button within the <tt class="docutils literal"><span class="pre">x3d</span></tt> element. Otherwise it would position absolute to the page. Additionally we need to remove the default 1 pixels border added by the X3DOM default stylesheet.</p>
<div class="highlight-css"><div class="highlight"><pre><span class="nf">#the_element</span> <span class="p">{</span>
    <span class="o">...</span>
    <span class="k">border</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>  <span class="o">//</span> <span class="n">remove</span> <span class="n">the</span> <span class="k">default</span> <span class="m">1px</span> <span class="k">border</span>
    <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
 <span class="p">}</span>

<span class="nf">#toggler</span> <span class="p">{</span>
    <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
    <span class="k">float</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span>
    <span class="k">z-index</span><span class="o">:</span> <span class="m">1</span><span class="p">;</span>
    <span class="k">top</span><span class="o">:</span> <span class="m">0px</span><span class="p">;</span>
    <span class="k">left</span><span class="o">:</span> <span class="m">0px</span><span class="p">;</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">10em</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">2em</span><span class="p">;</span>
    <span class="k">border</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
    <span class="k">background-color</span><span class="o">:</span> <span class="m">#202021</span><span class="p">;</span>
    <span class="k">color</span><span class="o">:</span> <span class="m">#ccc</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Looking at our example in a browser reveals that there is a &#8220;Zoom&#8221; button floating over the x3d element in the top left corner.</p>
<img alt="_images/styling3.png" src="_images/styling3.png" />
<p>### A button alone isn’t interaction</p>
<p>Nice. But a button alone is quite useless, we need to be able to do something with it. But first things first. In order to give the user some feedback what is going on, we add a hover effect by simply changing the background color. This is basic <a class="reference external" href="http://www.useit.com/">usability</a> and a simple style rule will do the job:</p>
<div class="highlight-css"><div class="highlight"><pre><span class="nf">#toggler</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="o">:</span><span class="nb">blue</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Next we add some JavasScript to the mix, because we want to actually change something when the user clicks on the button: Fullscreen. First we think of a method name to use, like <tt class="docutils literal"><span class="pre">toggle()</span></tt> and attach it to the <tt class="docutils literal"><span class="pre">onclick</span></tt> event of our button:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">&quot;toggler&quot;</span> <span class="na">onclick=</span><span class="s">&quot;toggle(this);return false;&quot;</span><span class="nt">&gt;</span>Zoom<span class="nt">&lt;/button&gt;</span>
</pre></div>
</div>
<p>Note to the purists: Yes, there are several, more elegant ways of achieving this. For the sake of clarity of this tutorial, we are using the <tt class="docutils literal"><span class="pre">onclick</span></tt> attribute of the <tt class="docutils literal"><span class="pre">button</span></tt> element. In practice you probably want to use a DOM library like <a class="reference external" href="http://jquery.com">jQuery</a> et al.</p>
<p>Next, we need to implement the <tt class="docutils literal"><span class="pre">toggle</span></tt> function. Within a <tt class="docutils literal"><span class="pre">script</span></tt> element. <strong>After</strong> the inclusion of <tt class="docutils literal"><span class="pre">x3dom.js</span></tt> we add the following code:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">zoomed</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">toggle</span><span class="p">(</span><span class="nx">button</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">new_size</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">x3d_element</span><span class="p">;</span>

        <span class="nx">x3d_element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;the_element&#39;</span><span class="p">);</span>

        <span class="nx">title</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>
    <span class="nx">body</span>  <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">zoomed</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">new_size</span> <span class="o">=</span> <span class="s2">&quot;50%&quot;</span><span class="p">;</span>
                <span class="nx">button</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;Zoom&quot;</span><span class="p">;</span>
                <span class="nx">title</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;block&quot;</span>
                <span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">padding</span> <span class="o">=</span> <span class="s1">&#39;10px&#39;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">new_size</span> <span class="o">=</span> <span class="s2">&quot;100%&quot;</span><span class="p">;</span>
                <span class="nx">button</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;Unzoom&quot;</span><span class="p">;</span>
                <span class="nx">title</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
                <span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">padding</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>
        <span class="p">}</span>

        <span class="nx">zoomed</span> <span class="o">=</span> <span class="o">!</span><span class="nx">zoomed</span><span class="p">;</span>

        <span class="nx">x3d_element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">new_size</span><span class="p">;</span>
        <span class="nx">x3d_element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">new_size</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This code implements a simple toggle function. The boolean variable <tt class="docutils literal"><span class="pre">zoomed</span></tt> tracks the state of the resize. Depending wether the <tt class="docutils literal"><span class="pre">x3d</span></tt> element is sized to 100% or not, the new size is set and applied to the <tt class="docutils literal"><span class="pre">x3d</span></tt> element (<tt class="docutils literal"><span class="pre">x3d_element</span></tt>). Since we use a square viewport <tt class="docutils literal"><span class="pre">width</span></tt> and <tt class="docutils literal"><span class="pre">height</span></tt> have the same values. Additionally, the text of the button is changed to show the action performed when the user is clicking it.</p>
<p>The rest of the styling affects the surrounding elements like the title and the body. In order to achieve the fullscreen effect we obviously hide the <cite>h1</cite> title and remove the default padding of the <tt class="docutils literal"><span class="pre">body</span></tt> element. Likewise when zooming back, the values are restored.</p>
<p>The last bit in the puzzle is another style rule which resets margin and padding of the body element. Add this rule in front of all others:</p>
<div class="highlight-css"><div class="highlight"><pre><span class="o">&lt;</span><span class="nt">style</span><span class="o">&gt;</span>
    <span class="nt">body</span> <span class="p">{</span>
        <span class="k">margin</span><span class="o">:</span><span class="m">0</span><span class="p">;</span>
        <span class="k">padding</span><span class="o">:</span><span class="m">10px</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">...</span>
<span class="o">&lt;/</span><span class="nt">style</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Finally the fully zoomed result looks like this:</p>
<img alt="_images/styling4.png" src="_images/styling4.png" />
<ul class="simple">
<li><a class="reference external" href="../_static/tutorial/styling/styling4.mov">See how it works (video)</a></li>
<li><a class="reference external" href="../_static/tutorial/styling/styling4.html">Try it for yourself (html)</a></li>
</ul>
<p>You will also find another example which also styles other properties <a class="reference external" href="http://www.x3dom.org/x3dom/example/x3dom_x3dElementCSSIntegration.html">here</a>.</p>
</div>
</div>
<span id="document-tutorial/imagesoundmovie"></span><div class="section" id="images-sound-and-movie-formats">
<span id="imagesoundmovie"></span><h4>Images, sound and movie formats<a class="headerlink" href="#images-sound-and-movie-formats" title="Permalink to this headline">¶</a></h4>
<p>This tutorial shows what type of image, sound and movie formats can be used in X3DOM and what are the features and restrictions.</p>
<div class="section" id="images">
<h5>Images<a class="headerlink" href="#images" title="Permalink to this headline">¶</a></h5>
<p>You can use <a class="reference external" href="http://en.wikipedia.org/wiki/Portable_Network_Graphics">PNG</a>, <a class="reference external" href="http://en.wikipedia.org/wiki/Jpeg">JPEG</a> or <a class="reference external" href="http://en.wikipedia.org/wiki/Gif">GIF</a> to encode your static Texture data. JPG has a low memory profile but has a lossy compression and it does not support alpha channels. PNG compression is lossless and can handle alpha. GIF is also lossless and has alpha.</p>
<p>General: If you do not need an alpha channel and the content does not have hard edges (e.g. Text) use JPG. Otherwise use PNG. You should really not use GIF anymore. PNG is more flexible for future content (e.g. 16-bit channels).</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;ImageTexture</span> <span class="na">url=</span><span class="s">’foo.jpg’</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="sound">
<h5>Sound<a class="headerlink" href="#sound" title="Permalink to this headline">¶</a></h5>
<p>You can use <a class="reference external" href="http://en.wikipedia.org/wiki/Wav">WAV</a>, <a class="reference external" href="http://en.wikipedia.org/wiki/Mp3">MP3</a> and <a class="reference external" href="http://en.wikipedia.org/wiki/Ogg">OGG</a> for sound sources. All UA should support WAV. If you would like to use compressed formats (e.g. MP3 or OGG) provide alternative encodings in your AudioClip node.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;AudioClip</span> <span class="na">url=</span><span class="s">’”foo.wav”,”foo.ogg”‘</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="movies">
<h5>Movies<a class="headerlink" href="#movies" title="Permalink to this headline">¶</a></h5>
<p>There is right now no single movie file supported by all user agents. Use the <a class="reference external" href="http://x3dom.org/x3dom/example/x3dom_video.xhtml">X3DOM formats exmaple</a> to check your browser.</p>
<p>The best solution right now is to encode your content as <a class="reference external" href="http://en.wikipedia.org/wiki/MP4">MP4</a> and <a class="reference external" href="http://en.wikipedia.org/wiki/OGV">OGV</a> movie and provide alternative sources in your MovieTexture node.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;MovieTexture</span> <span class="na">url=</span><span class="s">’”foo.mp4″,”foo.ogv”‘</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</div>
</div>
<span id="document-tutorial/shadows"></span><div class="section" id="shadows">
<span id="id1"></span><h4>Shadows<a class="headerlink" href="#shadows" title="Permalink to this headline">¶</a></h4>
<p>This tutorial shows how to add shadows to your scene and how specific shadow settings can be used to influence shadow quality and performance.</p>
<div class="section" id="turning-on-shadows">
<h5>Turning on shadows<a class="headerlink" href="#turning-on-shadows" title="Permalink to this headline">¶</a></h5>
<p>To be able to use shadows, you first need a light source. What kind of light source does not matter &#8211; shadows can be used with directional lights and spot lights as well as point lights. Shadow rendering is turned on, when the <tt class="docutils literal"><span class="pre">shadowIntensity</span></tt> property of a light node is set to a value greater than zero (see code snippet below). The higher the setting, the darker the shadows will be. However, be advised that shadow computations are quite expensive and can have noticable impact on the performance of your application.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;directionalLight</span> <span class="na">direction=</span><span class="s">&#39;0 0 -1&#39;</span> <span class="na">intensity=</span><span class="s">&#39;1.0&#39;</span> <span class="na">shadowIntensity=</span><span class="s">&#39;0.7&#39;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/directionalLight&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-shadow-settings">
<h5>Basic shadow settings<a class="headerlink" href="#basic-shadow-settings" title="Permalink to this headline">¶</a></h5>
<p>One of the most important settings &#8211; both regarding the visual quality of the shadows and the performance &#8211; is the <tt class="docutils literal"><span class="pre">shadowMapSize</span></tt> setting. A shadow map is a texture which captures the scene from a light&#8217;s point of view and is the basis for all shadow computations in X3DOM. The size of the shadow map determines the resolution at which shadows are computed. The standard setting of 1024 should achieve good results in most cases, but depending on the situation you might want to change it anyway. In general, a higher shadow map resolution leads to more detailed shadows, but also to a significant drop in performance.</p>
<p>Another option which has significant impact on the quality of the shadows is shadow map filtering. Filtering makes the edges of the shadows seem smoother. It can be controlled with the <tt class="docutils literal"><span class="pre">shadowFilterSize</span></tt> attribute. A higher filter size increases the amount of blurring that is applied to a shadow map. However, the effectivenes of this technique does not only depend on the filter size, but also on the resolution of the shadow map. A high-resolution shadow map requires a higher filter size setting for filtering to be effective.</p>
</div>
<div class="section" id="cascading">
<h5>Cascading<a class="headerlink" href="#cascading" title="Permalink to this headline">¶</a></h5>
<p>Another technique to improve shadow quality which is especially helpful in big scenes is called cascading: the visible area is parted along the z-axis and for each of the created divisions (cascades) shadows are computed independently. The number of cascades to be used can be set with the <tt class="docutils literal"><span class="pre">shadowCascades</span></tt> option. Cascading can be used with directional lights and spot lights, but not with point lights. Be advised that this technique is only effective, if the light covers a relatively big area. Consequently, the main application scenario lies in the usage with a directional light.</p>
</div>
<div class="section" id="advanced-shadow-settings">
<h5>Advanced shadow settings<a class="headerlink" href="#advanced-shadow-settings" title="Permalink to this headline">¶</a></h5>
<p>With the right combination of <tt class="docutils literal"><span class="pre">shadowMapSize</span></tt>, <tt class="docutils literal"><span class="pre">shadowFilterSize</span></tt> and <tt class="docutils literal"><span class="pre">shadowCascades</span></tt> a satisfyable shadow quality should be achievable in most cases. However, there are situations in which further adjustments might be needed, which is why an additional set of shadow options was introduced into X3DOM.
The first one &#8211; <tt class="docutils literal"><span class="pre">shadowOffset</span></tt> &#8211; is used to hide artifacts which may occur in specific scenarios. One of these situations that is escpecially susceptible to inaccuracies is a scene in which the light direction is nearly parallel to an object&#8217;s surface. By increasing the <tt class="docutils literal"><span class="pre">shadowOffset</span></tt> the shadow artifacts become less pronounced. However, not only artifacts are affected by this setting, but to some degree the correctly drawn shadows are, too. A high shadow offset can result in light to leak onto objects which should be in shadow. For this reason the default offset value is zero.</p>
<p>Further options to influence shadow computations are given by the light node&#8217;s <tt class="docutils literal"><span class="pre">zNear</span></tt> and <tt class="docutils literal"><span class="pre">zFar</span></tt> properties. These settings determine the placement of the near and far planes of the light projection, i.e. the bounds of the area in which shadow casters are captured. If no such setting is given, the near and far planes are placed automatically. An example scenario where a manual setting of one of these planes might be helpful would be a scene where an object is placed very closely to the light source. If you don&#8217;t want that object to cast a shadow, the <tt class="docutils literal"><span class="pre">zNear</span></tt> setting can be set to a value which places the near plane behind that object and thereby excludes it from the shadow computations.
(Please note: if the shadows disappear when a shadow caster leaves the visible view area, then try setting the <cite>Environment</cite> bindable node&#8217;s <tt class="docutils literal"><span class="pre">frustumCulling</span></tt> field to false.)</p>
<p>The last two settings &#8211; <tt class="docutils literal"><span class="pre">shadowSplitFactor</span></tt> and <tt class="docutils literal"><span class="pre">shadowSplitOffset</span></tt> &#8211; are additional parameters for cascading. As mentioned before, when using shadow cascades the visible area is split along the z-axis. The <tt class="docutils literal"><span class="pre">shadowSplitFactor</span></tt> setting determines, how these splits are placed. A setting of zero gives an equidistant placement, a setting of one a logarithmic placement. In most cases a logarithmic placement should achieve better results, since it allocates more resolution to the close range where it is needed the most. However, the equidistant split scheme can still be useful in some scenarios, as the transitions between different cascades are less apparent.
The <tt class="docutils literal"><span class="pre">shadowSplitOffset</span></tt> option was introduced, because in some cases the cascades close to the near plane can get quite small. While this is good for shadow quality in that specific cascade, the transition to the next cascade will become all the more apparent. By using the <tt class="docutils literal"><span class="pre">shadowSplitOffset</span></tt> property, the split positions are moved away from the camera while the computation scheme that is defined by <tt class="docutils literal"><span class="pre">shadowSplitFactor</span></tt> is still respected.</p>
</div>
</div>
</div>
<p><strong>Content creation</strong></p>
<div class="toctree-wrapper compound">
<span id="document-tutorial/dataconversion"></span><div class="section" id="generic-3d-data-conversion">
<span id="dataconversion"></span><h4>Generic 3D data conversion<a class="headerlink" href="#generic-3d-data-conversion" title="Permalink to this headline">¶</a></h4>
<p>How to get your 3D asset in your application is one of the essential questions that every 3D runtime environment has to answer.</p>
<p>X3DOM uses X3D data embedded in (X)HTML pages and optional X3D-XML files referenced by the embedded part. The X3D-XML files can reference further X3D-XML files and therefore build a hierarchy of asset containers.</p>
<a class="reference internal image-reference" href="_images/x3dom-content-creation-pipeline.png"><img alt="Content creation pipeline" src="_images/x3dom-content-creation-pipeline.png" style="width: 514.8px; height: 655.2px;" /></a>
<p>This tutorial shows how to get your data into the X(HTML) page and how to convert it to X3D-XML so it could be externally referenced.</p>
<div class="section" id="dcc-export">
<h5>DCC export<a class="headerlink" href="#dcc-export" title="Permalink to this headline">¶</a></h5>
<p>Usually people use some form of Digital Content Creation (DCC) tool to build the 3D models. This can be a modeling system like Maya or 3D Studio Max, and also a CAD-System or simulation package.</p>
<p>They all usually allow exporting the internal representation to some form of 3D data file. Most support X3D or VRML, some even both (e.g. blender) plus other formats. For X3DOM you should look for a X3D exporter. VRML is your second best choice. X3D is a VRML derivate and superset.</p>
</div>
<div class="section" id="converter">
<h5>Converter<a class="headerlink" href="#converter" title="Permalink to this headline">¶</a></h5>
<p>If your DCC-tool does not support X3D or VRML you are forced to utilize another tool which will introduce a extra level of conversion. Depending on your format there are usually different converters. Refer to <a class="reference external" href="http://www.web3d.org/x3d/content/examples/X3dResources.html#Conversions">X3D/web3d.org data conversion</a> for more information.</p>
<p>However, you should really try to avoid this step and export directly to X3D or VRML.</p>
</div>
<div class="section" id="transcoding">
<h5>Transcoding<a class="headerlink" href="#transcoding" title="Permalink to this headline">¶</a></h5>
<p>If you have an X3D-XML or VRML file you can easily recode your data without any data loss. There are different options but the easiest right now is properly the Avalon-Optimizer (aopt) from the <a class="reference external" href="http://www.instantreality.org/">InstantReality</a> packages. You can <a class="reference external" href="http://www.instantreality.org/tools/x3d_encoding_converter/">use it online</a> or on your local machine to recode your data.</p>
<div class="section" id="offline-transcoding">
<h6>Offline Transcoding<a class="headerlink" href="#offline-transcoding" title="Permalink to this headline">¶</a></h6>
<p><a class="reference external" href="http://www.instantreality.org/downloads/">Download</a> and install the InstantPlayer system. The package includes a command line tool called aopt(.exe) which we will use for conversion. Setup your shell-environment to find and include the binary. The usually paths are:</p>
<ul class="simple">
<li>Windows: <tt class="docutils literal"><span class="pre">C:\Program</span> <span class="pre">Files\Instant</span> <span class="pre">Player\bin\aopt.exe</span></tt></li>
<li>Mac: <tt class="docutils literal"><span class="pre">/Applications/Instant</span> <span class="pre">Player.app/Contents/MacOS/aopt</span></tt></li>
<li>Linux: <tt class="docutils literal"><span class="pre">/opt/instantReality/bin/aopt</span></tt></li>
</ul>
<p>Then run <tt class="docutils literal"><span class="pre">aopt</span> <span class="pre">-h</span></tt> command to get a full list of options and usage instructions. For this tutorial the most important are:</p>
<div class="highlight-python"><pre>aopt -i foo.wrl -x foo.x3d      # Convert VRML to X3D-XML
aopt -i foo.x3d -N foo.html     # Convert VRML or X3D-XML to HTML
aopt -i foo.x3d -M foo.xhtml    # Convert VMRL or X3D-XML to XHTML
aopt -i foo.x3d -u -N foo.html  # Optimization and build DEF/USE reuses</pre>
</div>
</div>
</div>
<div class="section" id="building-the-file-hierarchy">
<h5>Building the File Hierarchy<a class="headerlink" href="#building-the-file-hierarchy" title="Permalink to this headline">¶</a></h5>
<p>A hierarchy of files can be built up with Inline nodes. The advantage here is that bigger objects/ meshes do not need to be directly part of a page’s source code, but can be loaded in parallel in the background.</p>
<p><strong>Important:</strong> If you use <tt class="docutils literal"><span class="pre">&lt;Inline</span> <span class="pre">url=”foo.x3d”</span> <span class="pre">/&gt;</span></tt> nodes in your content, you need a real server to run your application. This will not work locally from your disc.</p>
</div>
</div>
<span id="document-tutorial/aopt"></span><div class="section" id="analyzing-and-optimizing-your-model-for-the-3d-web">
<span id="aopt"></span><h4>Analyzing and optimizing your model for the 3D Web<a class="headerlink" href="#analyzing-and-optimizing-your-model-for-the-3d-web" title="Permalink to this headline">¶</a></h4>
<p>The InstantReality platform provides its users tools to help them better understand and optimize their (possibly large) 3D data sets. One such tool is aopt that (among other things) can help you in various ways to optimize 3D models with a special focus on scene-graph data.</p>
<p><a class="reference external" href="http://www.instantreality.org/downloads/">Get the aopt tool</a></p>
<p>While on Windows and Linux the aopt tool is simply located in Instant Reality&#8217;s <cite>bin</cite> folder, on Mac it is sort of hidden here:</p>
<div class="highlight-none"><div class="highlight"><pre>/Applications/Instant Player.app/Contents/MacOS/aopt
</pre></div>
</div>
<div class="section" id="id1">
<h5>aopt<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<p>aopt is a powerful command line tool that comes bundled with InstantReality. If you have InstantReality installed, opening your command line and entering &#8220;aopt&#8221; will provide you with a list of all available command line arguments and some examples of its usage. A very basic procedure for example would be to convert a file that InstantReality can open (e.g. in obj, ply or wrl format) into an X3D file:</p>
<div class="highlight-none"><div class="highlight"><pre>aopt –i [input.foo] -x [output].x3d
</pre></div>
</div>
<p>(Note: leave out &#8220;[&#8221; and &#8220;]&#8221; for the actual command line with your files.)</p>
<p>Or to HTML:</p>
<div class="highlight-none"><div class="highlight"><pre>aopt –i [input.foo] -N [output].html
</pre></div>
</div>
<p>For a general introduction to data conversion with aopt <a class="reference external" href="http://x3dom.org/docs/dev/tutorial/dataconversion.html">check here</a>.
Generelly, you get some more advice calling <cite>aopt -h</cite> and <cite>aopt -H</cite>.</p>
</div>
<div class="section" id="analyzing-your-3d-model">
<h5>Analyzing your 3D model<a class="headerlink" href="#analyzing-your-3d-model" title="Permalink to this headline">¶</a></h5>
<p>You can get some basic statistics for your file using the &#8220;-p&#8221; parameter:</p>
<div class="highlight-none"><div class="highlight"><pre>aopt -i [input.foo] -p
</pre></div>
</div>
<p>This will give you some basic information like the number of nodes and the numbers of various types of nodes. For example, a scene that is static but heavy on the number of nodes might be suited for automatic restructuring (see below).</p>
</div>
<div class="section" id="imagegeometry-binarygeometry-nodes">
<h5>ImageGeometry &amp; BinaryGeometry nodes<a class="headerlink" href="#imagegeometry-binarygeometry-nodes" title="Permalink to this headline">¶</a></h5>
<p>If you want to retain the basic structure of your scene-graphs (i.e. not change any of the nodes, only their contents) you can convert geometry nodes to special <tt class="docutils literal"><span class="pre">ImageGeometry</span></tt> or <tt class="docutils literal"><span class="pre">BinaryGeometry</span></tt> nodes that will apply advanced compression techniques. This will create additional files that are referenced from &lt;output&gt;.x3d, so you should first create a folder, e.g.:</p>
<div class="highlight-none"><div class="highlight"><pre>mkdir imggeo
aopt -i [input.foo] -g imggeo/:s -x [output].x3d
</pre></div>
</div>
<p>Note: currently it is import that &#8220;imggeo&#8221; (or any folder you choose) does exist. Please also note that the &#8220;/&#8221; is NOT optional, it needs to be added at the end of the path.</p>
<p>The &#8221;:is&#8221; part is a sub-parameter. &#8220;i&#8221; is for &#8220;index&#8221; and &#8220;s&#8221; for &#8220;strip&#8221;, so this example will generate and store indexed trianglestrip geometry. For <tt class="docutils literal"><span class="pre">ImageGeometry</span></tt> nodes these are the only options available and it is recommended to either use <cite>s</cite> or <cite>is</cite>.</p>
<p>As an alternative you can convert to <tt class="docutils literal"><span class="pre">BinaryGeometry</span></tt> instead of <tt class="docutils literal"><span class="pre">ImageGeometry</span></tt> nodes:</p>
<div class="highlight-none"><div class="highlight"><pre>mkdir bingeo
aopt -i [input.foo] -G &quot;bingeo/:is&quot; -x [output].x3d
</pre></div>
</div>
<p>Or convert to HTML using 16 bit interleaved attribute buffers:</p>
<div class="highlight-none"><div class="highlight"><pre>mkdir bingeo
aopt -i [input.foo] -G &quot;bingeo/:saI&quot; -N [output].html
</pre></div>
</div>
<p>This conversion leads to geometry nodes that look like the one shown next:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;binaryGeometry</span> <span class="na">vertexCount=</span><span class="s">&#39;1153083&#39;</span> <span class="na">primType=</span><span class="s">&#39;&quot;TRIANGLES&quot;&#39;</span>
    <span class="na">position=</span><span class="s">&#39;19.811892 -57.892578 -1.699294&#39;</span>
    <span class="na">size=</span><span class="s">&#39;92.804482 159.783081 26.479685&#39;</span>
    <span class="na">coord=</span><span class="s">&#39;binGeo/BG0_interleaveBinary.bin#0+24&#39;</span> <span class="na">coordType=</span><span class="s">&#39;Int16&#39;</span>
    <span class="na">normal=</span><span class="s">&#39;binGeo/BG0_interleaveBinary.bin#8+24&#39;</span> <span class="na">normalType=</span><span class="s">&#39;Int16&#39;</span>
    <span class="na">color=</span><span class="s">&#39;binGeo/BG0_interleaveBinary.bin#16+24&#39;</span> <span class="na">colorType=</span><span class="s">&#39;Int16&#39;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/binaryGeometry&gt;</span>
</pre></div>
</div>
<p>For <tt class="docutils literal"><span class="pre">BinaryGeometry</span></tt> the available parameters are shown next.</p>
<ul class="simple">
<li>i: index</li>
<li>s: trianglestrip</li>
<li>a: autoIndex (only index data with less than 16 bit indices)</li>
<li>c: compact (use 16 bit representation for vertex attributes)</li>
<li>p: normal in spherical coordinates</li>
<li>I: interleaved (use 16 bit interleaved vertex data)</li>
</ul>
<p>The most compact option for <tt class="docutils literal"><span class="pre">BinaryGeometry</span></tt> is using &#8220;sacp&#8221;. In the following little
example, first <cite>creaseAngle</cite> is set to a value greater Pi to avoid per face normals, then
a suitable viewpoint is generated with the -V option, and finally binary meshes are created.</p>
<div class="highlight-none"><div class="highlight"><pre>mkdir binGeo
aopt -i [input.foo] -f PrimitiveSet:creaseAngle:4 -V -G &quot;binGeo/:sacp&quot; -N [output].html
</pre></div>
</div>
</div>
<div class="section" id="mesh-restructuring">
<h5>Mesh restructuring<a class="headerlink" href="#mesh-restructuring" title="Permalink to this headline">¶</a></h5>
<p>If you are willing to completely restructure the scene-graph to increase performance, you can use this function:</p>
<div class="highlight-none"><div class="highlight"><pre>aopt -i [input.foo] -F &quot;Scene:opt(1),maxtris(20000)&quot; -x [output].x3d
</pre></div>
</div>
<p>This will try to automatically optimize your scene, for example it might try to merge (flatten) your whole scene, generate one or more texture atlases on the way or split all geometry nodes so they can be indexed with 16 bits.</p>
<p>Instead of <tt class="docutils literal"><span class="pre">Scene</span></tt> you can also have specific node names or node type names for a more targeted approach. The sub-parameters in this example configure aopt to create a single-index geometry with up to 20,000 triangles per geometry node.</p>
<p>It&#8217;s not necessary to set any sub-parameters here.
Next, an example is shown how to also accomplish mesh optimization (here of a ply model) by calling aopt three times, for cleanup, mesh patching (for coping with the 16 bit indices limit), and final binary geometry creation.</p>
<div class="highlight-none"><div class="highlight"><pre>aopt -i model.ply -u -b model-clean.x3db
aopt -i model-clean.x3db -F Scene -b model-opt.x3db
aopt -i model-opt.x3db -G binGeo/:saI -N model.html
</pre></div>
</div>
<p>Currently available sub-parameters for the &#8220;-F&#8221; option are:</p>
<ul class="simple">
<li>int opt: 0:none 1:createSingleIndex 2:createSharedIndex 3:optimizePrimitives</li>
<li>int maxtris: Maximum number of triangles per geometry node</li>
<li>int vertexcolor: Store material color in vertex color, if the amount of triangles in the geometry is under the threshold</li>
<li>int texcoords: Ignore geometry with texture coordinates greater than that value</li>
<li>int optimizeTC: Try to lower texture coordinates to this value (generates more triangles)</li>
<li>bool storeondisk: Geometries are stored on disk (lower Memory consumption during process)</li>
<li>bool toworld: The vertex positions are transformed to world coordinates</li>
<li>bool idmap: Should an ID map be created?</li>
<li>bool flat: Scene is stored in a flat graph (true), or in a hierarchy (false)</li>
<li>bool cacheopt: Merges all geometry nodes with same material and rebuild it to chunks of 65,535 (= 2^16 - 1) vertices</li>
<li>bool calcnormals: false to keep normals, true to recalc them after building new geometries</li>
<li>int maxIndexSize: Maximum index size for rebuild by index/texture</li>
<li>int maxTextureSize: Maximum texture size for rebuild by texture size</li>
<li>float centerBB: Output will be transformed to a centered BBox with given size</li>
</ul>
<p>Example:</p>
<div class="highlight-none"><div class="highlight"><pre>aopt -i [input.foo] -F &quot;Scene:maxtris(5000),flat(true),calcnormals(false),centerBB(50)&quot; -x [output].x3d
</pre></div>
</div>
<p>Note: Depending on the operation the internal tree optimization method chooses, not all parameters are used! Boolean values can be both, 0/1 and false/true.</p>
</div>
</div>
<span id="document-tutorial/blender_export"></span><div class="section" id="blender-export">
<span id="id1"></span><h4>Blender export<a class="headerlink" href="#blender-export" title="Permalink to this headline">¶</a></h4>
<p>Converting <a class="reference external" href="http://www.blender.org/">Blender</a> scenes into X3DOM webpages is pretty simple: Blender already supports direct X3D export even so there are some issues (<a class="reference external" href="https://savage.nps.edu/X3D-Edit/BlenderExportToX3d.html">Don Brutzman wrote about</a>). Blender Version 2.4 seems to export some more nodes (e.g. lights), but in general it works. We will explore this more in the future, but an exported X3D file (such as the little horse shown below) may afterwards be easily be integrated into an HTML webpage using X3DOM.</p>
<div class="figure">
<a class="reference external image-reference" href="http://x3dom.org/x3dom/example/blenderExport/horse.html"><img alt="Horse model" src="_images/blender_x3dom.png" style="width: 198.5px; height: 197.0px;" /></a>
<p class="caption">Horse model courtesy of <a class="reference external" href="http://etyekfilm.hu/">http://etyekfilm.hu/</a></p>
</div>
<p>Just finish your model in Blender and export to x3d file format (see next image).</p>
<div class="figure">
<a class="reference external image-reference" href="http://x3dom.org/x3dom/example/blenderExport/horse.html"><img alt="Blender export" src="_images/blender-export-menu.png" style="width: 511.0px; height: 252.0px;" /></a>
<p class="caption">Export in Blender 2.4 (left) and 2.5 (right)</p>
</div>
<p>There are two ways to get your X3D data into the HTML page, and both include no coding at all:</p>
<div class="section" id="two-file-solution-link-the-x3d-file">
<h5>Two-file solution, link the X3D-file<a class="headerlink" href="#two-file-solution-link-the-x3d-file" title="Permalink to this headline">¶</a></h5>
<p>Just use a very simple X3D scene in your HTML file, which, more or less, only includes an <tt class="docutils literal"><span class="pre">&lt;inline&gt;</span></tt> node. This nodes references and asynchronously downloads the X3D file. Therefore you need a real web server (e.g. Apache) running while using <tt class="docutils literal"><span class="pre">&lt;inline&gt;</span></tt> nodes in X3DOM.</p>
<p>The result: <a class="reference external" href="http://x3dom.org/x3dom/example/blenderExport/horse-inline.html">http://x3dom.org/x3dom/example/blenderExport/horse-inline.html</a></p>
</div>
<div class="section" id="one-file-solution-embed-the-x3d-data-inside-of-the-html-page">
<h5>One-file solution, embed the X3D data inside of the HTML page<a class="headerlink" href="#one-file-solution-embed-the-x3d-data-inside-of-the-html-page" title="Permalink to this headline">¶</a></h5>
<p>You can embed the X3D file by hand in a (X)HTML page, but this may include some hand-tweaking. Better use the aopt-converter described in <a class="reference internal" href="index.html#dataconversion"><em>Generic 3D data conversion</em></a>. This can be done offline with a single command:</p>
<div class="highlight-python"><pre>aopt -i horse.x3d -N horse.html</pre>
</div>
<p>You also may use the <a class="reference external" href="http://doc.instantreality.org/tools/x3d_encoding_converter/">converter online</a>. Just open <cite>horse.x3d</cite> with your favorite text editor and paste it into the source text field. Choose <em>XML encoding (X3D)</em> as input type and <em>HTML5 encoded webpage</em> as output type and press the <em>Convert encoding</em> button.</p>
<p>The result: <a class="reference external" href="http://x3dom.org/x3dom/example/blenderExport/horse.html">http://x3dom.org/x3dom/example/blenderExport/horse.html</a></p>
<p>The main difference between the two versions is the handling of Viewpoint nodes (as cameras are called in X3D). If you use the two-file solution, you get a spec-compliant standard camera, while the viewpoints in the included data are not available at the beginning. In the one-file solution you already have the Viewpoint nodes from Blender at the start time. Just copy one of the viewpoints into the main HTML page to correct this behavior if you want.</p>
<p>Here is a <a class="reference external" href="../_static/tutorial/blender_export/blender-horse.zip">zip archive</a>  (272kb) with all files used in this tutorial including blender model, texture, and x3d model.</p>
</div>
</div>
<span id="document-tutorial/max_export"></span><div class="section" id="ds-max-export">
<span id="max-export"></span><h4>3ds Max Export<a class="headerlink" href="#ds-max-export" title="Permalink to this headline">¶</a></h4>
<p>If you are using <a class="reference external" href="http://usa.autodesk.com/adsk/servlet/pc/index?id=13567410&amp;siteID=123112">Autodesk 3ds Max</a> for modeling (available only for Microsoft Windows), you can install our exporter plug-in InstantExport. If you do not yet have installed 3ds Max, there is also a 30-day trial version of the modeling software available.
Nightly beta builds of <a class="reference external" href="ftp://ftp.igd.fraunhofer.de/outgoing/irbuild/InstantExport/">InstantExport</a> are available for download <a class="reference external" href="ftp://ftp.igd.fraunhofer.de/outgoing/irbuild/InstantExport/">here</a>.</p>
<p>InstantExport is the <a class="reference external" href="http://www.instantreality.org/">InstantReality</a> X3D exporter for 3ds Max and not only exports XML-based X3D as well as VRML, its classic encoding, but it can also now directly export to HTML/XHTML.
But please note that – as the exporter plug-in is still under development – there are still lots of features in Max, which yet cannot be properly exported. So, if you find a bug, please report it in the <a class="reference external" href="http://forum.instantreality.org/index.php?board=19.0">InstantReality forum</a>.</p>
<div class="section" id="installation">
<h5>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h5>
<p>After having downloaded the exporter, unzip the zip file and choose the correct version for your system and Max version. After that, (assumed you are using the standard installation path and 3ds Max 2008) copy the file <tt class="docutils literal"><span class="pre">InstantExport.dle</span></tt> (the Max version of a DLL) into <tt class="docutils literal"><span class="pre">C:\Program</span> <span class="pre">Files\Autodesk\3ds</span> <span class="pre">Max</span> <span class="pre">2008\plugins</span></tt>.</p>
</div>
<div class="section" id="export">
<h5>Export<a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h5>
<p>Then start 3ds Max, load the 3d model you want to export, choose <em>Export</em> in the File menu, type in a file name, e.g. <tt class="docutils literal"><span class="pre">test.xhtml</span></tt>, and select the file type – in this case <em>InstantExport (</em>.WRL,*.XHTML,*.X3D)*
After that, the exporter GUI pops up. Here, under <em>Encoding</em> choose <em>XHTML</em>, as shown in the screenshot below. Finally, press the <em>Export</em> button. For more information, the zip file also includes a help file for the exporter.</p>
<a class="reference internal image-reference" href="_images/instantExport1.png"><img alt="_images/instantExport1.png" src="_images/instantExport1.png" style="width: 382.85px; height: 382.85px;" /></a>
</div>
</div>
<span id="document-tutorial/maya_export"></span><div class="section" id="maya-export">
<span id="id1"></span><h4>Maya export<a class="headerlink" href="#maya-export" title="Permalink to this headline">¶</a></h4>
<p>If you are working with <a class="reference external" href="http://www.autodesk.com/">Autodesk Maya</a> for modeling, shading and animating your 3d scenes, use this tutorial to create an interactive X3DOM website out of your model. This tutorial is tested with Autodesk Maya 2011. Nevertheless, the procedure should work even for older Maya versions.</p>
<p>The basic idea is to export your scene to VRML and convert this to an X3DOM/HTMLsite using InstantReality’s <tt class="docutils literal"><span class="pre">aopt</span></tt> binary (see <a class="reference internal" href="index.html#dataconversion"><em>Generic 3D data conversion</em></a>).</p>
<a class="reference external image-reference" href="http://x3dom.org/x3dom/example/mayaExport/spaceship.html"><div align="center" class="align-center"><img alt="_images/maya0.png" class="align-center" src="_images/maya0.png" style="width: 345.6px; height: 275.4px;" /></div>
</a>
<div class="section" id="step-1">
<h5>Step 1<a class="headerlink" href="#step-1" title="Permalink to this headline">¶</a></h5>
<p>Model and shade in Maya as usual. You should use PNG images for texturing.</p>
<a class="reference internal image-reference" href="_images/maya1.png"><div align="center" class="align-center"><img alt="_images/maya1.png" class="align-center" src="_images/maya1.png" style="width: 640.0px; height: 339.2px;" /></div>
</a>
</div>
<div class="section" id="step-2">
<h5>Step 2<a class="headerlink" href="#step-2" title="Permalink to this headline">¶</a></h5>
<p>Open ‘Window | Settings/Preferences | Plug-in manager’ and check the ‘loaded’ or ‘Auto load’ option vrml2Export.</p>
<div align="center" class="align-center"><img alt="_images/maya2.png" class="align-center" src="_images/maya2.png" /></div>
</div>
<div class="section" id="step-3">
<h5>Step 3<a class="headerlink" href="#step-3" title="Permalink to this headline">¶</a></h5>
<p>Open the Export dialog under ‘File | Export All..’, Enter a filename (.wrl suffix) and switch to filetype ‘vrml2′. Don’t forget to check the following export options:</p>
<blockquote>
<div><div class="line-block">
<div class="line">Hierarchy: Full</div>
<div class="line">Texture Options: Original</div>
<div class="line">Export: Normals and Textures</div>
</div>
</div></blockquote>
<p>Click the “Export All” button. This will create a vrml2 file in your scenes folder.</p>
<div align="center" class="align-center"><img alt="_images/maya3.png" class="align-center" src="_images/maya3.png" /></div>
</div>
<div class="section" id="step-4">
<h5>Step 4<a class="headerlink" href="#step-4" title="Permalink to this headline">¶</a></h5>
<p>Open a terminal or command prompt, change to the folder containing your vrml2 model and your textures and run <cite>aopt</cite> (part of <a class="reference external" href="http://www.instantreality.org/">InstantReality</a>, see <a class="reference internal" href="index.html#dataconversion"><em>Generic 3D data conversion</em></a> for details) by typing the following command (assuming to be <cite>spaceship.wrl</cite> the name of your model):</p>
<div class="highlight-python"><pre>| aopt -i spaceship.wrl -d Switch -f ImageTexture:repeatS:false
|      -f ImageTexture:repeatT:false -u -N spaceship.html</pre>
</div>
<p><strong>Note:</strong> <tt class="docutils literal"><span class="pre">aopt</span></tt> is automatically coming with your InstantReality player installation. You will find the executable within the <tt class="docutils literal"><span class="pre">bin</span></tt> folder of the Player. If you don’t have Instant Reality installed yet, download and install from <a class="reference external" href="http://www.instantreality.org">www.instantreality.org</a>.</p>
</div>
<div class="section" id="step-5">
<h5>Step 5<a class="headerlink" href="#step-5" title="Permalink to this headline">¶</a></h5>
<p>Maya is using absolute path names. Therefore, open your html file with a standard text editor (vi, emacs, notepad++, etc.) and remove all paths from <tt class="docutils literal"><span class="pre">ImageTexture</span></tt>. For example, replace:</p>
<div class="highlight-python"><pre>url=’”c:\users\me\maya\project\sourceimages\spaceship_color.png”‘</pre>
</div>
<p>with:</p>
<div class="highlight-python"><pre>url=’”spaceship_color.png”‘</pre>
</div>
</div>
<div class="section" id="step-6">
<h5>Step 6<a class="headerlink" href="#step-6" title="Permalink to this headline">¶</a></h5>
<p>Copy HTML and textures into your web folder and open the website with your <a class="reference external" href="http://x3dom.org/check">X3DOM capable</a> browser.</p>
<p>If you want to try out this tutorial: Here is a <a class="reference external" href="../_static/tutorial/maya_export/spaceship1.zip">zip archive</a> (208 kb) containing all relevant files including Maya model and texture.</p>
<p>You want to see the result live in your browser? Here is the <a class="reference external" href="http://x3dom.org/x3dom/example/mayaExport/spaceship.html">final webpage</a></p>
</div>
</div>
<span id="document-tutorial/wow_export"></span><div class="section" id="world-of-warcraft-models-to-x3dom">
<span id="wow-export"></span><h4>World of Warcraft Models to X3DOM<a class="headerlink" href="#world-of-warcraft-models-to-x3dom" title="Permalink to this headline">¶</a></h4>
<p><strong>WARNING: World of Warcraft Models are Blizzard property.</strong>
<strong>You can not use them on your site without permission from Blizzard.</strong></p>
<p>The <a class="reference external" href="http://code.google.com/p/wowmodelviewer/">WOWModelViewer</a> project is an open source application to create machinima with characters and models form the World of Warcraft MMORPG. One of its features is the ability to export models into various formats, two of them being X3D and X3DOM. The X3DOM option directly outputs an XHTML file with the appropriate header code. In its current released version 7.0.1 r462, only static models can be exported, but an option to export animations as well is already available in the code.</p>
<p>To export a model you’ll need a full World of Warcraft installation (for instance a <a class="reference external" href="https://www.battle.net/account/creation/wow/signup/">10 day trial version</a>) and the <a class="reference external" href="http://code.google.com/p/wowmodelviewer/">WOWModelViewer</a>. Open the application, select a model on the right hand side and click on <em>File-&gt;Export model-&gt;X3D</em> in XHTML.</p>
<a class="reference internal image-reference" href="_images/wowx3d.png"><div align="center" class="align-center"><img alt="_images/wowx3d.png" class="align-center" src="_images/wowx3d.png" style="width: 571.5px; height: 428.5px;" /></div>
</a>
<p>The exported files can be viewed in a <a class="reference external" href="http://www.x3dom.org/?page_id=9">X3DOM capable browser</a>.</p>
<p>Some video results can be watched here:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://www.youtube.com/watch?v=16P6_e7VUmw">http://www.youtube.com/watch?v=16P6_e7VUmw</a></li>
<li><a class="reference external" href="http://www.youtube.com/watch?v=h4OnrXiA_Zc">http://www.youtube.com/watch?v=h4OnrXiA_Zc</a></li>
</ul>
</div></blockquote>
</div>
<span id="document-tutorial/bvh"></span><div class="section" id="the-bvhrefiner-component-refining-and-loading-hierarchical-data-dynamically">
<span id="bvh"></span><h4>The BVHRefiner component - Refining and Loading hierarchical data dynamically<a class="headerlink" href="#the-bvhrefiner-component-refining-and-loading-hierarchical-data-dynamically" title="Permalink to this headline">¶</a></h4>
<p>The BVHRefiner is a component that refines and loads hierarchical data dynamically during runtime. Two different dataset structures can be used (WMTS, TREE) that are described later.</p>
<div class="section" id="d-example-of-puget-sound-rendered-with-a-wmts-conform-dataset">
<h5>3D-Example of Puget Sound rendered with a WMTS conform dataset<a class="headerlink" href="#d-example-of-puget-sound-rendered-with-a-wmts-conform-dataset" title="Permalink to this headline">¶</a></h5>
<div align="center" class="align-center"><img alt="_images/puget_sound.jpg" class="align-center" src="_images/puget_sound.jpg" /></div>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;BVHRefiner</span> <span class="na">maxDepth=</span><span class="s">&#39;5&#39;</span>
            <span class="na">minDepth=</span><span class="s">&#39;2&#39;</span>
            <span class="na">interactionDepth=</span><span class="s">&#39;4&#39;</span>
            <span class="na">subdivision=</span><span class="s">&#39;64 64&#39;</span>
            <span class="na">size=</span><span class="s">&#39;4096 4096&#39;</span>
            <span class="na">factor=</span><span class="s">&#39;10&#39;</span>
            <span class="na">maxElevation=</span><span class="s">&#39;410&#39;</span>
            <span class="na">elevationUrl=</span><span class="s">&quot;Puget Sound WMTS/elevation&quot;</span>
            <span class="na">textureUrl=</span><span class="s">&quot;Puget Sound WMTS/satellite&quot;</span>
            <span class="na">normalUrl=</span><span class="s">&quot;Puget Sound WMTS/normal&quot;</span>
            <span class="na">elevationFormat=</span><span class="s">&#39;png&#39;</span>
            <span class="na">textureFormat=</span><span class="s">&#39;png&#39;</span>
            <span class="na">normalFormat=</span><span class="s">&#39;png&#39;</span>
            <span class="na">mode=</span><span class="s">&quot;3d&quot;</span>
            <span class="na">submode=</span><span class="s">&quot;wmts&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/BVHRefiner&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="parameter-descriptions">
<h5>Parameter descriptions<a class="headerlink" href="#parameter-descriptions" title="Permalink to this headline">¶</a></h5>
<p>The following table lists the parameters currently supported:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="13%" />
<col width="6%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Parameter</th>
<th class="head">Values</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>maxDepth</td>
<td>0, 1, ... n</td>
<td>3</td>
<td>maximum depth of the tree, or dataset</td>
</tr>
<tr><td>minDepth</td>
<td>0, 1, ... n</td>
<td>0</td>
<td>minimum depth of tree that should be rendered as soon as possible</td>
</tr>
<tr><td>interactionDepth</td>
<td>0, 1, ... n</td>
<td>maxDepth</td>
<td>maximum rendered depth during user interaction with scene</td>
</tr>
<tr><td>subdivision</td>
<td>0, 1, ... 125</td>
<td>1 1</td>
<td>resolution of a rendered tile</td>
</tr>
<tr><td>size</td>
<td>0, 1 ... n</td>
<td>1 1</td>
<td>size of the entire terrain</td>
</tr>
<tr><td>factor</td>
<td>0, 1, ... n</td>
<td>1.0</td>
<td>factor affects the distance to create or render the next level (the higher the higher the performance, the lower the higher the quality)</td>
</tr>
<tr><td>maxElevation</td>
<td>0.0, 0.1, ... n</td>
<td>1.0</td>
<td>maximum displacement in y direction</td>
</tr>
<tr><td>elevationUrl</td>
<td>string</td>
<td>&#8220;&#8221;</td>
<td>Url to dataset of displacement data</td>
</tr>
<tr><td>textureUrl</td>
<td>string</td>
<td>&#8220;&#8221;</td>
<td>Url to dataset of surface texture data</td>
</tr>
<tr><td>normalUrl</td>
<td>string</td>
<td>&#8220;&#8221;</td>
<td>Url to dataset of normal data</td>
</tr>
<tr><td>elevationFormat</td>
<td>png, jpg, gif ...</td>
<td>png</td>
<td>Data format of displacement dataset</td>
</tr>
<tr><td>textureFormat</td>
<td>png, jpg, gif ...</td>
<td>png</td>
<td>Data format of surface texture dataset</td>
</tr>
<tr><td>normalFormat</td>
<td>png, jpg, gif ...</td>
<td>png</td>
<td>Data format of normal dataset</td>
</tr>
<tr><td>mode</td>
<td>2D, 3D, bin, bvh</td>
<td>3D</td>
<td>2D (planes), 3D (displaced y-coordinate of 2D-Planes), bin (binary files, WMTS), bvh (binary files, TREE)</td>
</tr>
<tr><td>submode</td>
<td>WMTS, TREE</td>
<td>WMTS</td>
<td>utilized dataset (WMTS, TREE (currently only in 2D mode))</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="currently-supported-dataset-formats">
<h5>Currently supported dataset formats<a class="headerlink" href="#currently-supported-dataset-formats" title="Permalink to this headline">¶</a></h5>
<p>We support two different types of datasets. The first is based on WMTS specification and the second version is a folder based file arrangement. In the 3D case, only the wmts format is supported. Both, the usage of WMTS and TREE for this BVHRefiner node are specified in the following subsections.</p>
<div class="section" id="wmts">
<h6>WMTS<a class="headerlink" href="#wmts" title="Permalink to this headline">¶</a></h6>
<p>In WMTS (<a class="reference external" href="http://www.opengeospatial.org/standards/wmts/">more information</a>) a multidimensional dataset of a terrain can be integrated very easy. For every level of detail a new matrix of tiles is required. Every level has its own folder. So if you want to get five different levels of detail in your application, five folders must exist, numbered from 0 to 4. The detail from level to level grows up by a factor of four. Into the folders for the levels, subfolders that describe the columns of the matrix have to be inserted. On level 0 you only have one column, represented through the folder with the name 0. In the next level you have two columns named 0 and 1, growing up by a factor of two from level to level. In the subfolders you place the images that represent the tiles data. There must be as much images as subfolders. On level 0 you only have one image that represents the whole terrain data. On level one exist two subfolders. Every subfolder has to include two images, on the next level four per subfolder and so on. The following figure (figure 1) shows the addressing-scheme:</p>
<a class="reference internal image-reference" href="_images/wmts.png"><div align="center" class="align-center"><img alt="_images/wmts.png" class="align-center" src="_images/wmts.png" style="width: 640.0px; height: 340.0px;" /></div>
</a>
</div>
<div class="section" id="tree">
<h6>TREE<a class="headerlink" href="#tree" title="Permalink to this headline">¶</a></h6>
<p>The TREE addressing-scheme is as easy as the WMTS addressing scheme. Every level in the tree defines a level of detail of the terrain. On level 0 we have an image (1.png) that represents the terrain in the worst quality. It has a folder that has its number as name (1). In this folder we find four images where all four images together represent the whole terrain. The resolution grows up every level by a factor of four. Every image has its folder that always includes four images with the next finer resolution quality. If an image has no folder, the final resolution quality has reached. The position of the images for a finer resolution is as follows:</p>
<ul class="simple">
<li>1.png: top left</li>
<li>2.png: bottom left</li>
<li>3.png: top right</li>
<li>4.png: bottom right</li>
</ul>
<a class="reference internal image-reference" href="_images/tree.png"><div align="center" class="align-center"><img alt="_images/tree.png" class="align-center" src="_images/tree.png" style="width: 640.0px; height: 340.0px;" /></div>
</a>
</div>
</div>
<div class="section" id="hints-for-a-self-made-dataset-construction">
<h5>Hints for a self-made dataset construction<a class="headerlink" href="#hints-for-a-self-made-dataset-construction" title="Permalink to this headline">¶</a></h5>
<a class="reference internal image-reference" href="_images/tile_pyramid.png"><div align="center" class="align-center"><img alt="_images/tile_pyramid.png" class="align-center" src="_images/tile_pyramid.png" style="width: 656.0px; height: 239.44px;" /></div>
</a>
<p>To reconstruct a 3D-Terrain from a WMTS conform dataset a special arrangement of the pixels in the images of the WMTS dataset is required. Neighboring tiles have to share the pixels on the boundaries. The figure on top of this subsection shows on the left the original image, in the middle the image of level 0 of the final dataset and on the right the four images of level 1.
Furthermore the resolution of every image of the final dataset must be of the size <em>2n + 1</em>, where <em>n</em> is the value of the size attribute of a tile in the <em>BVHRefiner</em> node. In the example of Puget Sound on top of this tutorial a value of <em>&#8216;64 64&#8217;</em> is chosen for every tile as size attribute. So on the dataset, every image has to be of the size <em>&#8216;129 129&#8217;</em>. This is a condition for the algorithm to prevent cracks on the mesh representation.</p>
</div>
<div class="section" id="using-the-bvhrefiner-dataset-converter">
<h5>Using the BVHRefiner Dataset Converter:<a class="headerlink" href="#using-the-bvhrefiner-dataset-converter" title="Permalink to this headline">¶</a></h5>
<p>The BVHRefiner Dataset Converter is a tool to produce a WMTS or TREE conform dataset from single image. This is only a test application and can not handle arbitrary picture sizes.</p>
<a class="reference internal image-reference" href="_images/dataset_converter.jpg"><div align="center" class="align-center"><img alt="_images/dataset_converter.jpg" class="align-center" src="_images/dataset_converter.jpg" style="width: 605.0px; height: 499.0px;" /></div>
</a>
<ol class="arabic simple">
<li>Representation of the original image</li>
<li>Opens  a file dialog where the source image can be chosen</li>
<li>Represents the path where the final dataset should be stored</li>
<li>Opens a folder dialog where the storing path of the final dataset can be chosen</li>
<li>Convertion settings: a) Convertion Type: Surface-, Displacement- or Normal-Dataset, b) Dataset-Format: Currently supported dataset formats (WMTS, TREE)</li>
<li>Advanced Settings (are calculated automatically, but can be changed if required): a) Mesh Resolution: Resolution of a tile in the x3dom-application, b) Depth of the Quadtree: The depth of the final dataset (levels of detail), c) Image Type: The image format of all images in the final dataset (jpg, png, gif)</li>
<li>Starts the convertion of the original source image into the tiled dataset</li>
<li>Current progress of the convertion</li>
</ol>
<div class="section" id="download-net-based-bvhrefiner-dataset-converter">
<h6>Download .NET based BVHRefiner Dataset Converter:<a class="headerlink" href="#download-net-based-bvhrefiner-dataset-converter" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li>Windows 7 x86:  <a class="reference external" href="http://x3dom.org/docs/dev/_static/tutorial/bvh_refiner/BVHRefiner_Dataset_Converter_x64.zip">BVHRefiner Dataset Converter x86</a></li>
<li>Windows 7 x64:  <a class="reference external" href="http://x3dom.org/docs/dev/_static/tutorial/bvh_refiner/BVHRefiner_Dataset_Converter_x64.zip">BVHRefiner Dataset Converter x64</a></li>
<li>Source Code:    <a class="reference external" href="http://x3dom.org/docs/dev/_static/tutorial/bvh_refiner/BVHRefiner_Dataset_Converter_Source.zip">BVHRefiner Dataset Converter Source</a></li>
</ul>
</div>
</div>
</div>
</div>
<p><strong>Application prototypes</strong></p>
<div class="toctree-wrapper compound">
<span id="document-tutorial/flash_mashup"></span><div class="section" id="flash-ar-x3dom-mashup">
<span id="flash-mashup"></span><h4>Flash + AR / X3DOM Mashup<a class="headerlink" href="#flash-ar-x3dom-mashup" title="Permalink to this headline">¶</a></h4>
<p>This tutorial describes how to create a simple desktop augmented reality scene. We are using Adobe Flash based FLARToolkit for marker tracking and X3DOM for rendering of the 3D scene. By <a class="reference external" href="http://www.igd.fraunhofer.de/igd-a4/staff/dipl-media-system-designer-jens-keil/">Jens Keil</a> and <a class="reference external" href="http://www.igd.fraunhofer.de/igd-a4/staff/dipl-designer-michael-zollner/">Michael Zoellner</a>.</p>
<a class="reference external image-reference" href="http://x3dom.org/x3dom/example/flar/x3dom_flar.html"><img alt="_images/flash_mashup_01.jpg" src="_images/flash_mashup_01.jpg" style="width: 524.3px; height: 568.4px;" /></a>
<p><a class="reference external" href="http://x3dom.org/x3dom/example/flar/x3dom_flar.html">View the AR Demo</a></p>
<div class="section" id="at-a-glance">
<h5>At a glance<a class="headerlink" href="#at-a-glance" title="Permalink to this headline">¶</a></h5>
<p>The tutorial shows the first online Augmented Reality application with Plugin-free hardware accelerated rendering on a GPU.
Having the advantages of browser-supported WebGL technology, there is no need to download any kind of plug-in anymore to create Augmented Reality inside web browsers.  Its a fast, simple and declarative way to integrate 3D content into HTML and bases on well known and documented  standards, like HTML 5, CSS and JavaScript.</p>
<p>Although the tracking still uses Adobe Flash, its modular enough to change and switch tracking as soon as there are native standards for camera access available.</p>
</div>
<div class="section" id="how-does-it-work">
<h5>How does it work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">¶</a></h5>
<p>Our FLARToolkit marker tracker shows the webcam in the background and sends a model view matrix of the recognized marker to a Javascript function in the HTML file. From there the MatrixTransform around a bunch of 3D objects in the X3D scene is set with these values.</p>
</div>
<div class="section" id="setting-up-flartoolkit-marker-tracker">
<h5>Setting up FLARToolkit marker tracker<a class="headerlink" href="#setting-up-flartoolkit-marker-tracker" title="Permalink to this headline">¶</a></h5>
<p>Don’t worry. You don’t need the Flash IDE or any Actionscript knowledge for this tutorial. We are providing a compiled FLARToolkit marker tracker ready for including into an HTML page.
It consists of the compiled SWF file (x3domflartoolkit.swf) and a Data folder with the camera parameters (camera_para.dat) and the marker pattern (x3dom.pat).
You can change the marker by creating a new one with the <a class="reference external" href="http://flash.tarotaro.org/blog/2009/07/12/mgo2/">pattern generator</a>, putting the results into the Data folder and renaming it to x3dom.pat. Please note that you should keep the generator’s default values for marker resolution and segment size of  16×16 and 50% in order to work properly.</p>
</div>
<div class="section" id="including-the-flartoolkit-marker-tracker">
<h5>Including the FLARToolkit marker tracker<a class="headerlink" href="#including-the-flartoolkit-marker-tracker" title="Permalink to this headline">¶</a></h5>
<p>The compiled SWF is included via object and embed tags into the HTML page. It calls the Javascript function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">set_marker_transform</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>as soon as it recognizes a marker in the video. The exchanging values include the marker’s position and orientation. As mentioned, they are used to set the 3D object’s position and rotation.</p>
</div>
<div class="section" id="a-simple-3d-scene">
<h5>A simple 3D Scene<a class="headerlink" href="#a-simple-3d-scene" title="Permalink to this headline">¶</a></h5>
<p>The demo scene shows a simple AR application: The earth globe, which hovers above the marker. A second layer shows the actual clouds surround the whole planet; live data loaded into the 3D scene.</p>
<p>Our demo is declared in HTML and structured in several divisions. Both, the 3D content and the compiled SWF, are grouped inside two several &lt;Div /&gt; nodes. The layer containing the 3d markup is styled with CSS and positioned on top of the compiled flash movie. Note that both have to have the same size and position in order to achieve a well augmentation effect.</p>
<p>Then, we set up a <tt class="docutils literal"><span class="pre">&lt;MatrixTransform</span> <span class="pre">/&gt;</span></tt> node, which groups every 3D object we want to be positioned on the marker. Inside we declare a simple <tt class="docutils literal"><span class="pre">&lt;Sphere</span> <span class="pre">/&gt;</span></tt> geometry and texture it with a png file of earth’s appearance.  Around the first one, we place a second <tt class="docutils literal"><span class="pre">&lt;Sphere</span> <span class="pre">/&gt;</span></tt> object at the same position but with a larger scale and texture it with the transparent cloud data.</p>
</div>
<div class="section" id="the-basic-structure">
<h5>The basic structure<a class="headerlink" href="#the-basic-structure" title="Permalink to this headline">¶</a></h5>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;x3d&gt;</span>
<span class="nt">&lt;scene&gt;</span>
    <span class="nt">&lt;viewpoint</span> <span class="na">fieldOfView=</span><span class="s">&#39;0.60&#39;</span> <span class="na">position=</span><span class="s">&#39;0 0 0&#39;</span><span class="nt">&gt;&lt;/viewpoint&gt;</span>

     <span class="nt">&lt;matrixtransform</span> <span class="na">id=</span><span class="s">&quot;root_transform&quot;</span><span class="nt">&gt;</span>
             <span class="nt">&lt;transform</span>  <span class="na">translation=</span><span class="s">&quot;0 0 20&quot;</span> <span class="na">scale=</span><span class="s">&quot;50 50 50&quot;</span>
             <span class="na">rotation=</span><span class="s">&quot;0 1 0 3.145&quot;</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;transform</span> <span class="na">def=</span><span class="s">&quot;earth&quot;</span> <span class="na">rotation=</span><span class="s">&quot;1 0 0 -1.57&quot;</span><span class="nt">&gt;</span>
                             <span class="nt">&lt;shape&gt;</span>
                                     <span class="nt">&lt;appearance&gt;</span>
                                             <span class="nt">&lt;imageTexture</span> <span class="na">url=</span><span class="s">&quot;some_texture.jpg&quot;</span><span class="nt">&gt;</span>
                                             <span class="nt">&lt;/imageTexture&gt;</span>
                                     <span class="nt">&lt;/appearance&gt;</span>
                                     <span class="nt">&lt;sphere&gt;&lt;/sphere&gt;</span>
                             <span class="nt">&lt;/shape&gt;</span>
                     <span class="nt">&lt;/transform&gt;</span>
                     <span class="nt">&lt;transform</span> <span class="na">def=</span><span class="s">&quot;clouds&quot;</span> <span class="na">rotation=</span><span class="s">&quot;1 0 0 -1.57&quot;</span>
                     <span class="na">scale=</span><span class="s">&quot;1.1 1.1 1.1&quot;</span><span class="nt">&gt;</span>
                             <span class="nt">&lt;shape&gt;</span>
                                     <span class="nt">&lt;appearance&gt;</span>
                                             <span class="nt">&lt;imageTexture</span> <span class="na">url=</span><span class="s">&quot;some_texture2.jpg&quot;</span><span class="nt">&gt;</span>
                                             <span class="nt">&lt;/imageTexture&gt;</span>
                                     <span class="nt">&lt;/appearance&gt;</span>
                                     <span class="nt">&lt;sphere&gt;&lt;/sphere&gt;</span>
                             <span class="nt">&lt;/shape&gt;</span>
                     <span class="nt">&lt;/transform&gt;</span>
             <span class="nt">&lt;/transform&gt;</span>
     <span class="nt">&lt;/matrixtransform&gt;</span>
<span class="nt">&lt;/scene&gt;</span>
<span class="nt">&lt;/x3d&gt;</span>
</pre></div>
</div>
<p>You don’t need to calibrate your webcam. All of this is handled by the tracker’s <tt class="docutils literal"><span class="pre">camera_para.dat</span> <span class="pre">file</span></tt>. Hence, our <tt class="docutils literal"><span class="pre">&lt;Viewpoint</span> <span class="pre">/&gt;</span></tt>, i.e. our 3D camera, is fixed in its fieldOfview 0.6 and position of 0. The tracker’s values only change and transform our 3D objects; not the camera.</p>
</div>
<div class="section" id="the-javascript-functionality">
<h5>The Javascript functionality<a class="headerlink" href="#the-javascript-functionality" title="Permalink to this headline">¶</a></h5>
<p>After declaring the 3D content, we add the Javascript code, that handles the data exchange between the Flash based marker tracking and our 3D scene.</p>
<p>First, we declare a function that hides the X3DOM canvas with the 3D content after the document has loaded. The user needs to allow the Flash tracker to access his camera by clicking a button. This is not possible, when x3dom is rendered on top at start up. As soon as the user confirmed and the marker is detected, we show the 3d content up again.</p>
<a class="reference internal image-reference" href="_images/flash_mashup_02.jpg"><img alt="_images/flash_mashup_02.jpg" src="_images/flash_mashup_02.jpg" style="width: 524.3px; height: 568.4px;" /></a>
<p>Our code:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">show_canvas</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

 <span class="c1">// Hide x3dom canavs on page load</span>
 <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#topLayer&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">show_canvas</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
 <span class="p">});</span>

<span class="c1">// Show x3dom canvas again</span>
<span class="c1">// function is triggered inside set_marker_transform()</span>
<span class="kd">function</span> <span class="nx">show_x3dom_canvas</span><span class="p">(){</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#topLayer&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="nx">show_canvas</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Lets take a closer look to the data exchange between X3DOM and the optical tracking:</p>
<p>We declare the <tt class="docutils literal"><span class="pre">set_marker_transform(value)</span></tt> function, which is expected by and triggered from inside the flash tracker. The function sets the new values for the MatrixTransform’s position and rotation. Then we fetch the root <tt class="docutils literal"><span class="pre">MatrixTransform</span></tt> node</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">root_transform</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root_transform&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>and update the values with the <tt class="docutils literal"><span class="pre">setAttribute(attribute,</span> <span class="pre">value)</span></tt> function</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">root_transform</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;matrix&#39;</span><span class="p">,</span> <span class="nx">q</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</pre></div>
</div>
<p>Since the tracking triggers  new values for every (video) frame, the position is updated as long as the marker is detected. Note, that we also need to convert the received marker values, since X3DOM’s and the tracking’s coordinate system don’t match.</p>
<p>Our code:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">//This function is triggered by flash based tracking</span>
<span class="kd">function</span> <span class="nx">set_marker_transform</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">root_transform</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root_transform&#39;</span><span class="p">);</span>

<span class="c1">// if not enabled, show x3dom canvas</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">show_canvas</span><span class="p">)</span>
    <span class="nx">show_x3dom_canvas</span><span class="p">();</span>

<span class="c1">// Convert rotation form left to right handed coordinate system</span>
<span class="c1">// mirror z</span>
<span class="nx">q</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">q</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">];</span>
<span class="nx">q</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">q</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
<span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
<span class="nx">q</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">q</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
<span class="nx">q</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">q</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>

<span class="c1">// update the grouped 3d object&#39;s matrixTranform</span>
<span class="nx">root_transform</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;matrix&#39;</span><span class="p">,</span> <span class="nx">q</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The tracking also gives feedback when the marker is lost. If you want to work with this information, just declare and use this function inside your Javascript:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">on_marker_loss</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
    <span class="c1">//marker not detected anymore, do something</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="trouble-shooting">
<h5>Trouble shooting<a class="headerlink" href="#trouble-shooting" title="Permalink to this headline">¶</a></h5>
<p>Sometimes the 3D content doesn’t show up. This may have two reasons: Be sure you are using a browser who supports WebGL. Also texture loading may take a bit longer and hence may take X3DOM several seconds until the geometry shows up.</p>
<p>You can also control if the marker tracking is working: Check, whether there is a red outline around your marker. If not, ensure the marker is on a plane surface, not occupied and there is enough ambient light.</p>
</div>
</div>
<span id="document-tutorial/historical_objects"></span><div class="section" id="d-lightbox-gallery-of-historical-objects">
<span id="historical"></span><h4>3D Lightbox Gallery of Historical Objects<a class="headerlink" href="#d-lightbox-gallery-of-historical-objects" title="Permalink to this headline">¶</a></h4>
<p>This tutorial describes how to load arbitrary 3D geometry inside your web page with x3dom. We are going to develop an <a class="reference external" href="http://x3dom.org/x3dom/example/3d-coform/index.html">online catalog of 3D objects</a>, that popup inside our page using the popular lightbox overlay principle (<a class="reference external" href="http://x3dom.org/x3dom/example/3d-coform/index.html">click here for the demo</a>). In our case, the 3D objects are X3D files of 3D scanned historical objects. By Jens Keil.</p>
<a class="reference external image-reference" href="http://x3dom.org/x3dom/example/3d-coform/index.html"><div align="center" class="align-center"><img alt="_images/coform3d_1.png" class="align-center" src="_images/coform3d_1.png" /></div>
</a>
<div class="section" id="generating-the-grid">
<h5>Generating the grid<a class="headerlink" href="#generating-the-grid" title="Permalink to this headline">¶</a></h5>
<p>Our main page is only the overview of all objects. Hence, we are going to generate a grid with thumbnail images of our objects. We link these images to a second page with the X3DOM content. Since we have 36 objects our grid consists of 6 rows and 6 columns. Let’s use a table for that.</p>
<div class="highlight-html"><pre>&lt;table id="demo_table" class="gallery clearfix &gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;a href="external_html_page"&gt;&lt;img /&gt;&lt;/a&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</pre>
</div>
<div align="center" class="align-center"><img alt="_images/coform3d_2.png" class="align-center" src="_images/coform3d_2.png" /></div>
<p>As mentioned, our 3D content is displayed inside a lightbox popup. This is a JavaScript based script that is normally used to overlays images inside the current web page. In our case, we are going to overlay a external page with the 3D object in it. We have used the <a class="reference external" href="http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/">prettyPhoto lightbox version of Stephane Caron</a>, since it features the <a class="reference external" href="http://en.wikipedia.org/wiki/HTML_element#Frames">iframes</a> which we need to load a second HTML file into our main page.</p>
<p>In order to tell the script that our linked content should be opened inside the overlay, we add some query parameters at the end of the URL. For example:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;dcm200310301737.html?iframe=true&amp;width=500&amp;height=600&quot;</span>
   <span class="na">rel=</span><span class="s">&quot;prettyPhoto[iframe]&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Having finished to set up the grid, we initialize the lightbox script after the table definition:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
    <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.gallery a[rel^=&#39;prettyPhoto&#39;]&quot;</span><span class="p">).</span><span class="nx">prettyPhoto</span><span class="p">(</span>
            <span class="p">{</span><span class="nx">theme</span><span class="o">:</span><span class="s1">&#39;light_rounded&#39;</span><span class="p">});</span>
        <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-up-the-3d-objects-html-file">
<h5>Setting up the 3D object’s HTML file<a class="headerlink" href="#setting-up-the-3d-objects-html-file" title="Permalink to this headline">¶</a></h5>
<p>Now, let’s take a look on the inlined page. We have such a page for every 3D object inside our grid. First, we export the scanned data into the X3D file format. Then we convert the X3D file into a X3DOM/HTML file (see <a class="reference internal" href="index.html#dataconversion"><em>Generic 3D data conversion</em></a>).</p>
<div align="center" class="align-center"><img alt="_images/coform3d_3.png" class="align-center" src="_images/coform3d_3.png" /></div>
<p>Our X3D decoded 3D content is inside the generated HTML now. We may add a headline or some textual explanation here; indeed, even any other media we’d like to be displayed inside our lightbox overlay. Note, that adding the script node with a link to <tt class="docutils literal"><span class="pre">x3dom.js</span></tt> at the end is doing all the magic: from declarative X3D/HTML5 to visual 3D content inside your web page.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>dcm200409012807<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;x3d</span> <span class="na">id=</span><span class="s">&#39;someUniqueId&#39;</span> <span class="na">showStat=</span><span class="s">&#39;false&#39;</span> <span class="na">showLog=</span><span class="s">&#39;false&#39;</span> <span class="na">x=</span><span class="s">&#39;0px&#39;</span> <span class="na">y=</span><span class="s">&#39;0px&#39;</span> <span class="na">width=</span><span class="s">&#39;400px&#39;</span> <span class="na">height=</span><span class="s">&#39;400px&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;scene</span> <span class="na">DEF=</span><span class="s">&#39;scene&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;worldInfo</span> <span class="na">title=</span><span class="s">&#39;dcm200409012807&#39;</span><span class="nt">&gt;&lt;/worldInfo&gt;</span>
        <span class="nt">&lt;navigationInfo</span> <span class="na">headlight=</span><span class="s">&#39;true&#39;</span> <span class="na">type=</span><span class="s">&#39;&quot;EXAMINE&quot;&#39;</span><span class="nt">&gt;&lt;/navigationInfo&gt;</span>
        <span class="nt">&lt;directionalLight</span> <span class="na">on=</span><span class="s">&#39;false&#39;</span> <span class="na">ambientIntensity=</span><span class="s">&#39;1&#39;</span> <span class="na">intensity=</span><span class="s">&#39;0&#39;</span><span class="nt">&gt;&lt;/directionalLight&gt;</span>
        <span class="nt">&lt;transform</span> <span class="na">DEF=</span><span class="s">&#39;ORITGT&#39;</span> <span class="na">rotation=</span><span class="s">&#39;1 1 1 -2.094&#39;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;shape&gt;</span>
            <span class="nt">&lt;appearance&gt;</span>
              <span class="nt">&lt;imageTexture</span> <span class="na">url=</span><span class="s">&#39;&quot;dcm200409012807_texture.0.jpg&quot;&#39;</span><span class="nt">&gt;&lt;/imageTexture&gt;</span>
            <span class="nt">&lt;/appearance&gt;</span>
            <span class="nt">&lt;indexedFaceSet</span> <span class="na">texCoordIndex=</span><span class="s">&#39; ... &#39;</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;coordinate</span> <span class="na">DEF=</span><span class="s">&quot;COORD&quot;</span> <span class="na">point=</span><span class="s">&#39; ... &#39;</span> <span class="nt">/&gt;&lt;/textureCoordinate&gt;</span>
            <span class="nt">&lt;/indexedFaceSet&gt;</span>
          <span class="nt">&lt;/shape&gt;</span>
        <span class="nt">&lt;/transform&gt;</span>
        <span class="nt">&lt;background</span> <span class="na">skyColor=</span><span class="s">&#39;1 1 1&#39;</span><span class="nt">&gt;&lt;/background&gt;</span>
        <span class="nt">&lt;viewpoint</span> <span class="na">position=</span><span class="s">&#39;0 0 4&#39;</span><span class="nt">&gt;&lt;/viewpoint&gt;</span>
      <span class="nt">&lt;/scene&gt;</span>
    <span class="nt">&lt;/x3d&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&#39;text/javascript&#39;</span> <span class="na">src=</span><span class="s">&#39;../x3dom.js&#39;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h5>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h5>
<p>This tutorial explained how to generate a grid of 3D object inside a web page. Clicking on a thumbnail image opens the 3D object inside a lightbox popup within the current page. Rendering as well as basic navigation is handled by the X3DOM Javascript back end.</p>
</div>
</div>
<span id="document-tutorial/culling"></span><div class="section" id="culling">
<span id="id1"></span><h4>Culling<a class="headerlink" href="#culling" title="Permalink to this headline">¶</a></h4>
<p>This tutorial explains the different parameters to adjust x3doms integrated culling techniques for your personal needs on quality and performance.</p>
<div class="section" id="the-environment-bindable">
<h5>The Environment-Bindable<a class="headerlink" href="#the-environment-bindable" title="Permalink to this headline">¶</a></h5>
<p>All relevant parameters are included in the new Environment-Bindable. To change it&#8217;s settings it has to be added to the scene explicitly. For each culling technique there exists a boolean flag to enable/disable it and a list of more detailed settings if applicable. Each of the following sections explains the usage of a technique and it&#8217;s parameters. Their combination can lead to very different results which allows explicit performance tuning for a specific scene.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;environment</span> <span class="na">frustumCulling=</span><span class="s">&#39;true&#39;</span> <span class="na">smallFeatureCulling=</span><span class="s">&#39;true&#39;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/environment&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="view-frustum-culling">
<h5>View Frustum Culling<a class="headerlink" href="#view-frustum-culling" title="Permalink to this headline">¶</a></h5>
<p>The most common culling technique is the viewfrustum culling controlled by the viewFrustumCulling flag. The bounding volumes of the nodes are tested to be intersecting the frustum defining the current view. The nodes of the scene are traversed recursively reusing already calculated intersection if possible. It is the only technique which is not dependent on additional parameters.</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="43%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Setting</th>
<th class="head">Usage</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>frustumCulling</td>
<td>(de-)activate the culling technique</td>
<td>[true;false]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="small-feature-culling">
<h5>Small Feature Culling<a class="headerlink" href="#small-feature-culling" title="Permalink to this headline">¶</a></h5>
<p>Using the smallFeatureCulling flag this technique is activated. For each node the amount of pixels is calculated it&#8217;s bounding volume would cover in screen space. If the coverage is below the smallFeatureThreshold parameter the node (and subsequent shapes) is culled.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="49%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Setting</th>
<th class="head">Usage</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>smallFeatureCulling</td>
<td>(de-)activate the culling technique</td>
<td>[true;false]</td>
</tr>
<tr><td>smallFeatureTreshold</td>
<td>cull objects covering less pixels than treshold</td>
<td>[0..*]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="occlusion-culling">
<h5>Occlusion Culling *<a class="headerlink" href="#occlusion-culling" title="Permalink to this headline">¶</a></h5>
<p>Being the most complex supported culling method, occlusion culling is triggered by the occlusionCulling flag. The scene is traversed using the &#8220;Coherent Hierarchical Culling++&#8221; algorithm and based on the triggere occlusion queries the screen space coverage not occluded by other nodes is tested. A node is only drawn if its coverage is higher than the occlusionVisibilityTreshold.</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="56%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Setting</th>
<th class="head">Usage</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>occlusionCulling</td>
<td>(de-)activate the culling technique</td>
<td>[true;false]</td>
</tr>
<tr><td>occlusionVisibilityTreshold</td>
<td>cull objects covering less pixels than treshold due to occlusion</td>
<td>[0..*]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="low-priority-culling">
<h5>Low Priority Culling<a class="headerlink" href="#low-priority-culling" title="Permalink to this headline">¶</a></h5>
<p>This is the only supported comparison-based culling technique. Triggered by the lowPriorityCulling the nodes which passed all previous (activated) culling techniques are sorted by their priority. Afterwards the part of this list defined by the lowPriorityTreshold is removed. At the moment the screen-space coverage is used as priority, later on there will be a more sophisticated calculation allowing the user to set priorities to mark his or her personally important nodes. Therefore by now the priority culling is very similar to the small feature method but culling a relative amount instead of comparing to an absolute threshold.</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="57%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Setting</th>
<th class="head">Usage</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>lowPriorityCulling</td>
<td>(de-)activate the culling technique</td>
<td>[true;false]</td>
</tr>
<tr><td>lowPriorityThreshold</td>
<td>draw only objects within threshold fraction of priority sorted list</td>
<td>[0..1]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tesselation-detail-culling">
<h5>Tesselation Detail Culling<a class="headerlink" href="#tesselation-detail-culling" title="Permalink to this headline">¶</a></h5>
<p>The possibiliy of using this culling technique completely depends on the support of each drawable. Up to now only the <a class="reference external" href="http://www.x3dom.org/pop/">POP-Geometry</a> natively supports it. As long as the resulting error stays within the amount of pixels defined by tesselationErrorThreshold the tesselation of the mesh is lowered to certain degree. It can be enabled using the flag tesselationDetailCulling.</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="57%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Setting</th>
<th class="head">Usage</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>tesselationDetailCulling</td>
<td>(de-)activate the culling technique</td>
<td>[true;false]</td>
</tr>
<tr><td>tesselationErrorTreshold</td>
<td>use mesh simplification having lower error than threshold</td>
<td>[0..*]</td>
</tr>
</tbody>
</table>
<p>(* : Not fully implemented yet)</p>
</div>
</div>
</div>
<p><strong>Elsewhere</strong></p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://www.x3dom.org/x3dom/doc/slides/x3domIntroTutorial.pdf">Slides with introduction and tutorial</a></li>
</ul>
</div></blockquote>
<p>If you can read German, there is also some German content available on our website:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://www.x3dom.org/iX/">Beispiele aus dem iX-Tutorial</a></li>
<li><a class="reference external" href="http://www.x3dom.org/school/">Überblick und einführende Beispiele</a></li>
</ul>
</div></blockquote>
</div>
<span id="document-navigation"></span><div class="section" id="camera-navigation">
<span id="navigation"></span><h3>Camera Navigation<a class="headerlink" href="#camera-navigation" title="Permalink to this headline">¶</a></h3>
<p>X3DOM provides some generic interaction and navigation methods.
Interactive objects will be handled by HTML-like events.
Navigation can be user-defined or controlled by specific predefined modes.</p>
<p>Currently X3DOM supports the following interactive navigation modes:</p>
<ul class="simple">
<li>Examine</li>
<li>Walk</li>
<li>Fly</li>
<li>Look-at</li>
<li>Look-around</li>
<li>Game</li>
<li>Helicopter</li>
</ul>
<p>Non-Interactive movement encompasses the functionality of:</p>
<ul class="simple">
<li>Resetting a view</li>
<li>Showing all</li>
<li>Upright view</li>
</ul>
<div class="section" id="interactive-camera-movement">
<h4>Interactive camera movement<a class="headerlink" href="#interactive-camera-movement" title="Permalink to this headline">¶</a></h4>
<div class="section" id="examine">
<h5>Examine<a class="headerlink" href="#examine" title="Permalink to this headline">¶</a></h5>
<p>Activate this mode by pressing the <tt class="docutils literal"><span class="pre">&quot;e&quot;</span></tt> key.</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Mouse Button</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Rotate</td>
<td>Left / Left + Shift</td>
</tr>
<tr><td>Pan</td>
<td>Mid / Left + Ctrl</td>
</tr>
<tr><td>Zoom</td>
<td>Right / Wheel / Left + Alt</td>
</tr>
<tr><td>Set center of rotation</td>
<td>Double-click left</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="walk">
<h5>Walk<a class="headerlink" href="#walk" title="Permalink to this headline">¶</a></h5>
<p>Activate this mode by pressing the <tt class="docutils literal"><span class="pre">&quot;w&quot;</span></tt> key.</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Mouse Button</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Move forward</td>
<td>Left</td>
</tr>
<tr><td>Move backward</td>
<td>Right</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fly">
<h5>Fly<a class="headerlink" href="#fly" title="Permalink to this headline">¶</a></h5>
<p>Activate this mode by pressing the <tt class="docutils literal"><span class="pre">&quot;f&quot;</span></tt> key.</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Mouse Button</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Move forward</td>
<td>Left</td>
</tr>
<tr><td>Move backward</td>
<td>Right</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="helicopter">
<h5>Helicopter<a class="headerlink" href="#helicopter" title="Permalink to this headline">¶</a></h5>
<p>Activate this mode by pressing the <tt class="docutils literal"><span class="pre">&quot;h&quot;</span></tt> key.</p>
<p>To look downwards/upwards and to move higher/lower use the keys (8/9 and 6/7).</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Mouse Button</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Move forward</td>
<td>Left</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="look-at">
<h5>Look at<a class="headerlink" href="#look-at" title="Permalink to this headline">¶</a></h5>
<p>Activate this mode by pressing the <tt class="docutils literal"><span class="pre">&quot;l&quot;</span></tt> key.</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Mouse Button</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Move in</td>
<td>Left</td>
</tr>
<tr><td>Move out</td>
<td>Right</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="game">
<h5>Game<a class="headerlink" href="#game" title="Permalink to this headline">¶</a></h5>
<p>Activate this mode by pressing the <tt class="docutils literal"><span class="pre">&quot;g&quot;</span></tt> key.</p>
<p>To look around (rotate view) move the mouse.</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Key</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Move forward</td>
<td>Cursor up</td>
</tr>
<tr><td>Move backward</td>
<td>Cursor down</td>
</tr>
<tr><td>Strafe Left</td>
<td>Cursor left</td>
</tr>
<tr><td>Strafe Right</td>
<td>Cursor right</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="non-interactive-camera-movement">
<h4>Non-interactive camera movement<a class="headerlink" href="#non-interactive-camera-movement" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Key</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Reset view</td>
<td>r</td>
</tr>
<tr><td>Show all</td>
<td>a</td>
</tr>
<tr><td>Upright</td>
<td>u</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="mid-button-troubleshooting">
<h4>Mid-Button troubleshooting<a class="headerlink" href="#mid-button-troubleshooting" title="Permalink to this headline">¶</a></h4>
<p>If the web page has scroll bars and autoscrolling is enabled, Mid-Button
currently does not work correctly. As a workaround, you can disable autoscrolling
by unchecking the <strong>Use autoscrolling</strong> checkbox in the Firefox browser
options, as is shown in the screenshot below (for the Firefox case).</p>
<img alt="_images/UseAutoscrolling.png" src="_images/UseAutoscrolling.png" />
</div>
</div>
<span id="document-configuration"></span><div class="section" id="configuration">
<span id="id1"></span><h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>The X3D element supports attributes and a param tag which allows to set configuration for
the runtime.</p>
<div class="section" id="usage">
<h4>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h4>
<p>The param element behaves just like any other HTML element. It must be
nested below the X3D element. For XHTML you can use the self-closing syntax,
for HTML a closing tag is mandatory:</p>
<div class="highlight-python"><pre>&lt;x3d&gt;
    &lt;param name="showLog" value="true" &gt;&lt;/param&gt;
    &lt;scene&gt;
        ...
    &lt;/scene&gt;
&lt;/x3d&gt;</pre>
</div>
<p>Note: The param tag used to live as child of the scene element. This behavior has been changed with version 1.3 of
X3DOM. You will get a deprecation warning and support will be removed in 1.4.</p>
</div>
<div class="section" id="options">
<h4>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h4>
<p>The following table lists the parameters currently supported.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="23%" />
<col width="10%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Parameter</th>
<th class="head">Values</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>showLog</td>
<td>true, false</td>
<td>false</td>
<td>Hide or display the logging console</td>
</tr>
<tr><td>showStat</td>
<td>true, false</td>
<td>false</td>
<td>Hide or display the statistics overlay</td>
</tr>
<tr><td>showProgress</td>
<td>true, false, bar</td>
<td>true</td>
<td>Hide or show the loading indicator. The default
indicator is a spinner. The value &#8216;bar&#8217; will
use a progress bar.</td>
</tr>
<tr><td>PrimitiveQuality</td>
<td>High, Medium, Low, float</td>
<td>High/1.0</td>
<td>Render quality (tesselation level) for Box, Cone,
Cylinder, Sphere.</td>
</tr>
<tr><td>component</td>
<td>String (i.e. Geometry3D)</td>
<td>none</td>
<td>Name of the component to load</td>
</tr>
<tr><td>loadpath</td>
<td>String (i.e. nodes/)</td>
<td>none</td>
<td>The path or URI where to find the components</td>
</tr>
<tr><td>disableDoubleClick</td>
<td>true,false</td>
<td>false</td>
<td>Disables the default double click action on viewarea</td>
</tr>
<tr><td>disableRightDrag</td>
<td>true,false</td>
<td>false</td>
<td>Disable mouse right button drag and mouse wheel</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-troubleshooting"></span><div class="section" id="troubleshooting">
<span id="id1"></span><h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<p>As with most software systems, something can go wrong. But fear not.
There are a couple of things you can check and try. You’ll find some
hints and tips here.</p>
<div class="section" id="common-problems">
<h4>Common problems<a class="headerlink" href="#common-problems" title="Permalink to this headline">¶</a></h4>
<div class="section" id="i-am-not-seeing-anything">
<h5>I am not seeing anything<a class="headerlink" href="#i-am-not-seeing-anything" title="Permalink to this headline">¶</a></h5>
<p>Assuming we are not dealing with an electrical or vision problem:</p>
<blockquote>
<div><ul class="simple">
<li>Check if your HTML and X3D code is correct</li>
<li>If you are using the HTML5 doctype make sure all X3D tags are properly
closed. You can not use “self-closing” syntax. Instead you need to close
the tag explicitly: <tt class="docutils literal"><span class="pre">&lt;color</span> <span class="pre">...&gt;&lt;/color&gt;</span></tt>  NOT <tt class="docutils literal"><span class="pre">&lt;color</span> <span class="pre">...</span> <span class="pre">/&gt;</span></tt></li>
<li>For the HTML part, swing by the <a class="reference external" href="http://validator.w3.org/">W3C validator</a>
to check for syntax errors</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="there-are-weird-chars-or-some-gobbledygook-on-my-web-page">
<h5>There are weird chars or some gobbledygook on my web page<a class="headerlink" href="#there-are-weird-chars-or-some-gobbledygook-on-my-web-page" title="Permalink to this headline">¶</a></h5>
<p>This is most likely an encoding problem or errors generated by using unsuited
editors or HTML export tools (looking at you Word). Gobbledygook may be
caused by improperly closed tags (see above).</p>
<blockquote>
<div><ul class="simple">
<li>Check if you file encoding is OK. UTF-8 is recommended unless
otherwise required.</li>
<li>Use a HTML <tt class="docutils literal"><span class="pre">meta</span></tt> to denote the file encoding and make sure your file
endcoding matches your meta tag.</li>
<li>In case you are serving your files from a web server: make sure the
server sets proper HTTP headers (especially mimetype and encoding) and
middleware does not alter the file encoding (PHP et al. are sources for
messing up multi-byte encodings). Again, maintaining UTF-8 throughout is
a sensible choice (also
<a class="reference external" href="http://www.joelonsoftware.com/articles/Unicode.html">read this</a>).</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="how-to-ask-questions">
<h4>How to ask Questions<a class="headerlink" href="#how-to-ask-questions" title="Permalink to this headline">¶</a></h4>
<p>In order to analyze and debug your problem, please be more specific about the nature of your problem. Before you sit down and write a mail or forum post, it is helpful to ask yourself these questions and include this info in your question/report:</p>
<blockquote>
<div><ul class="simple">
<li>What exactly is not working?</li>
<li>Is it really an error or are you just unhappy with aesthetics?</li>
<li>What errors do you get?</li>
<li>Can you reproduce this behavior in an isolated testcase?</li>
<li>What did you try to solve your problem?</li>
</ul>
</div></blockquote>
<p>The following info is genuinely helpful in analyzing your problem:</p>
<blockquote>
<div><ul class="simple">
<li>OS, Version, Architecture</li>
<li>GPU type, driver versions</li>
<li>Output of <a class="reference external" href="about:gpu">about:gpu</a> in Chrome</li>
<li>Browsers and versions you tried and the results</li>
<li>Log output of X3DOM (javascript console)</li>
<li>You can generate some of the information here <a class="reference external" href="http://doesmybrowsersupportwebgl.com/">http://doesmybrowsersupportwebgl.com/</a></li>
</ul>
</div></blockquote>
<p>Also note that hot-linking x3dom.css/js should only be used for testing and development. Once you deploy your site, it is best to copy those files over to your server or a CDN. We can not guarantee that those URLs are stable and our network bandwidth is rather limited.</p>
<p>This his also a helpful page and a good read as well: <a class="reference external" href="http://catb.org/~esr/faqs/smart-questions.html">http://catb.org/~esr/faqs/smart-questions.html</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<p>If you are looking for information on a specific function, class or method,
this part of the documentation is for you.</p>
<div class="toctree-wrapper compound">
<span id="document-api"></span><div class="section" id="api">
<span id="runtime-api"></span><h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<p>The X3DOM API is currently split into two parts:</p>
<blockquote>
<div><ul class="simple">
<li>Runtime</li>
<li>Docs</li>
</ul>
</div></blockquote>
<p>The runtime api provides progrmmatic live access to the system. The
Documnetation API allows to dynamically generate documentation
artifacts embedded derived from the source code (e.g. a list of
loaded nodes).</p>
<div class="section" id="runtime">
<h4>Runtime<a class="headerlink" href="#runtime" title="Permalink to this headline">¶</a></h4>
<p>The X3DOM runtime API provides proxy object to programmatically read
and modify runtime parameters. The runtime proxy is attached to each
X3D element and can be used in the following manner:</p>
<div class="highlight-python"><pre>var e = document.getElementById('the_x3delement');
e.runtime.showAll();
e.runtime.resetView();
...</pre>
</div>
<p>Some methods, like the <tt class="docutils literal"><span class="pre">x3dom.ready()</span></tt> function need to be called
before the proxy object can be initialized. You can still override
these functions globally. In order to provide you with the means to
scope your actions to a specific X3D element, the methods receive
the X3D element they are working on as first parameter:</p>
<div class="highlight-python"><pre>x3dom.ready = function(element) {
    if (element == target_element) {
        // do something
    }
};</pre>
</div>
<dl class="function">
<dt id="noBackendFound">
<tt class="descname">noBackendFound</tt><big>(</big><big>)</big><a class="headerlink" href="#noBackendFound" title="Permalink to this definition">¶</a></dt>
<dd><p>This callback is executed once the system initialized and is not ready to
render the first time because there is no backend found. By default this
method noop. You can however override it with your own implementation.</p>
<blockquote>
<div><dl class="docutils">
<dt>x3dom.runtime.noBackendFound = function() {</dt>
<dd>alert(&#8220;No backend, what a bummer.&#8221;);</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>It is important to create this override before the document onLoad event has
fired. Therefore putting it directly under the inclusion of <tt class="docutils literal"><span class="pre">x3dom.js</span></tt> is the
preferred way to ensure overloading of this function.</p>
<p>Please note that this does not account for a installed, but disabled
Flash plugin.</p>
</dd></dl>

<dl class="function">
<dt id="ready">
<tt class="descname">ready</tt><big>(</big><big>)</big><a class="headerlink" href="#ready" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called once the system initialized and is ready to
render the first time. It is therefore possible to execute custom
action by overriding this method in your code:</p>
<div class="highlight-python"><pre>x3dom.runtime.ready = function() {
    alert("About to render something the first time");
};</pre>
</div>
<p>It is important to create this override before the document onLoad event
has fired. Therefore putting it directly under the inclusion of
<tt class="docutils literal"><span class="pre">x3dom.js</span></tt> is the preferred way to ensure overloading of this function.</p>
</dd></dl>

<dl class="function">
<dt id="enterFrame">
<tt class="descname">enterFrame</tt><big>(</big><big>)</big><a class="headerlink" href="#enterFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called just before the next frame is rendered. It is
therefore possible to execute custom actions by overriding this
method in your code:</p>
<div class="highlight-python"><pre>var element = document.getElementById('my_element');
element.runtime.enterFrame = function() {
    alert('hello custom enter frame');
};</pre>
</div>
<p>During initialization, just after <tt class="docutils literal"><span class="pre">ready()</span></tt> executed and before the very
first frame is rendered, only the global override of this method works.</p>
<p>If you need to execute code before the first frame renders, it is
therefore best to use the <tt class="docutils literal"><span class="pre">ready()</span></tt> function instead.</p>
</dd></dl>

<dl class="function">
<dt id="getActiveBindable">
<tt class="descname">getActiveBindable</tt><big>(</big><em>typeName</em><big>)</big><a class="headerlink" href="#getActiveBindable" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>typeName</strong> (<em>string</em>) &#8211; A valid Bindable node (e.g. Viewpoint, Background,</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Active dom element</p>
</td>
</tr>
</tbody>
</table>
<p>This method returns the currently active bindable DOM element of the given
type.</p>
<p>For example:</p>
<div class="highlight-python"><pre>var element, bindable;
element = doucment.getElementById('the_x3delement');
bindable = element.runtime.getActiveBindable('background');
bindable.setAttribute('set_bind', 'false');</pre>
</div>
</dd></dl>

<dl class="function">
<dt id="nextView">
<tt class="descname">nextView</tt><big>(</big><big>)</big><a class="headerlink" href="#nextView" title="Permalink to this definition">¶</a></dt>
<dd><p>Navigates to the next viewpoint.</p>
</dd></dl>

<dl class="function">
<dt id="prevView">
<tt class="descname">prevView</tt><big>(</big><big>)</big><a class="headerlink" href="#prevView" title="Permalink to this definition">¶</a></dt>
<dd><p>Navigates to the previous viewpoint.</p>
</dd></dl>

<dl class="function">
<dt id="viewpoint">
<tt class="descname">viewpoint</tt><big>(</big><big>)</big><a class="headerlink" href="#viewpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current viewpoint.</p>
</dd></dl>

<dl class="function">
<dt id="viewMatrix">
<tt class="descname">viewMatrix</tt><big>(</big><big>)</big><a class="headerlink" href="#viewMatrix" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">Matrix object</td>
</tr>
</tbody>
</table>
<p>Returns the current view matrix object.</p>
</dd></dl>

<dl class="function">
<dt id="projectionMatrix">
<tt class="descname">projectionMatrix</tt><big>(</big><big>)</big><a class="headerlink" href="#projectionMatrix" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">Matrix object</td>
</tr>
</tbody>
</table>
<p>Returns the current projection matrix object.</p>
</dd></dl>

<dl class="function">
<dt id="getWorldToCameraCoordinatesMatrix">
<tt class="descname">getWorldToCameraCoordinatesMatrix</tt><big>(</big><big>)</big><a class="headerlink" href="#getWorldToCameraCoordinatesMatrix" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">Matrix object</td>
</tr>
</tbody>
</table>
<p>Returns the current world to camera coordinates matrix.</p>
</dd></dl>

<dl class="function">
<dt id="getCameraToWorldCoordinatesMatrix">
<tt class="descname">getCameraToWorldCoordinatesMatrix</tt><big>(</big><big>)</big><a class="headerlink" href="#getCameraToWorldCoordinatesMatrix" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">Matrix object</td>
</tr>
</tbody>
</table>
<p>Returns the current camera to world coordinates matrix.</p>
</dd></dl>

<dl class="function">
<dt id="getViewingRay">
<tt class="descname">getViewingRay</tt><big>(</big><em>x</em>, <em>y</em><big>)</big><a class="headerlink" href="#getViewingRay" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> &#8211; Layer x position</li>
<li><strong>y</strong> &#8211; Layer y position</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Line object, from camera origin through (x, y)</p>
</td>
</tr>
</tbody>
</table>
<p>Returns the viewing ray for a given (x, y) position on the canvas.</p>
</dd></dl>

<dl class="function">
<dt id="getWidth">
<tt class="descname">getWidth</tt><big>(</big><big>)</big><a class="headerlink" href="#getWidth" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">Width in pixels</td>
</tr>
</tbody>
</table>
<p>Returns the width of the canvas element.</p>
</dd></dl>

<dl class="function">
<dt id="getHeight">
<tt class="descname">getHeight</tt><big>(</big><big>)</big><a class="headerlink" href="#getHeight" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">Height in pixels</td>
</tr>
</tbody>
</table>
<p>Returns the height of the canvas element.</p>
</dd></dl>

<dl class="function">
<dt id="mousePosition">
<tt class="descname">mousePosition</tt><big>(</big><em>event</em><big>)</big><a class="headerlink" href="#mousePosition" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>event</strong> &#8211; The event</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">[x,y] position</p>
</td>
</tr>
</tbody>
</table>
<p>Returns the 2d canvas layer position [x,y] for a given mouse event, i.e.,
the mouse cursor&#8217;s x and y positions relative to the canvas (x3d) element.</p>
</dd></dl>

<dl class="function">
<dt id="calcCanvasPos">
<tt class="descname">calcCanvasPos</tt><big>(</big><em>wx</em>, <em>wy</em>, <em>xz</em><big>)</big><a class="headerlink" href="#calcCanvasPos" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>wx</strong> &#8211; World coordiante X axis</li>
<li><strong>wy</strong> &#8211; World coordiante Y axis</li>
<li><strong>wz</strong> &#8211; World coordiante Z axis</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Array with 2D corrdinates (x,y)</p>
</td>
</tr>
</tbody>
</table>
<p>Takes world coordinates (x,y,z) of the scene and calculates
the relating 2D X/Y coordinates respective to the canvas
the scene is rendered on.</p>
<p>This allows you to relate 3D world coordinates
to a specific position on the 2D canvas. This can be usable
to position a HTML element over the canvaas (like a hint window
for exmaple).</p>
</dd></dl>

<dl class="function">
<dt id="calcPagePos">
<tt class="descname">calcPagePos</tt><big>(</big><em>wx</em>, <em>wy</em>, <em>xz</em><big>)</big><a class="headerlink" href="#calcPagePos" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>wx</strong> &#8211; World coordiante X axis</li>
<li><strong>wy</strong> &#8211; World coordiante Y axis</li>
<li><strong>wz</strong> &#8211; World coordiante Z axis</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Array with 2D corrdinates (x,y)</p>
</td>
</tr>
</tbody>
</table>
<p>Takes world coordinates (x,y,z) of the scene and calculates
the relating 2D X/Y coordinates relative to the document the
scene is rendered in.</p>
</dd></dl>

<dl class="function">
<dt id="calcClientPos">
<tt class="descname">calcClientPos</tt><big>(</big><em>wx</em>, <em>wy</em>, <em>xz</em><big>)</big><a class="headerlink" href="#calcClientPos" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>wx</strong> &#8211; World coordiante X axis</li>
<li><strong>wy</strong> &#8211; World coordiante Y axis</li>
<li><strong>wz</strong> &#8211; World coordiante Z axis</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Array with 2D corrdinates (x,y)</p>
</td>
</tr>
</tbody>
</table>
<p>Takes world coordinates (x,y,z) of the scene and calculates
the relating 2D X/Y coordinates relative to the window the
scene is rendered in.</p>
</dd></dl>

<dl class="function">
<dt id="getScreenshot">
<tt class="descname">getScreenshot</tt><big>(</big><big>)</big><a class="headerlink" href="#getScreenshot" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">URL to image</td>
</tr>
</tbody>
</table>
<p>Returns a Base64 encoded <a class="reference external" href="http://tools.ietf.org/html/rfc2397">data URI</a>
containing png image consisting of the current rendering. The resulting
URL will look similar to this:</p>
<div class="highlight-python"><pre>data:image/png;base64,iVBORw0KGgo...</pre>
</div>
<p>The browser will interpret this as a PNG image and display it.
A list of browsers which support data URI can be
<a class="reference external" href="http://en.wikipedia.org/wiki/Data_URI_scheme">found here</a>.</p>
<p>The following example illustrates the usage:</p>
<div class="highlight-python"><pre>var url = ...runtime.getScreenshot();
var img = document.createElement("img");
img.src = url;
...</pre>
</div>
</dd></dl>

<dl class="function">
<dt id="lightMatrix">
<tt class="descname">lightMatrix</tt><big>(</big><big>)</big><a class="headerlink" href="#lightMatrix" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">The current light matrix</td>
</tr>
</tbody>
</table>
<p>Returns the current light matrix.</p>
</dd></dl>

<dl class="function">
<dt id="resetView">
<tt class="descname">resetView</tt><big>(</big><big>)</big><a class="headerlink" href="#resetView" title="Permalink to this definition">¶</a></dt>
<dd><p>Navigates to the initial viewpoint.</p>
</dd></dl>

<dl class="function">
<dt id="lightView">
<tt class="descname">lightView</tt><big>(</big><big>)</big><a class="headerlink" href="#lightView" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if navigation was possible, false otherwise.</td>
</tr>
</tbody>
</table>
<p>Navigates to the first light, if any.</p>
</dd></dl>

<dl class="function">
<dt id="uprightView">
<tt class="descname">uprightView</tt><big>(</big><big>)</big><a class="headerlink" href="#uprightView" title="Permalink to this definition">¶</a></dt>
<dd><p>Navigates to upright view.</p>
</dd></dl>

<dl class="function">
<dt id="showAll">
<tt class="descname">showAll</tt><big>(</big><big>)</big><a class="headerlink" href="#showAll" title="Permalink to this definition">¶</a></dt>
<dd><p>Zooms so that all objects are visible.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>axis</strong> (<em>string</em>) &#8211; the axis as string: posX, negX, posY, negY, posZ, negZ</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="showObject">
<tt class="descname">showObject</tt><big>(</big><em>obj</em>, <em>axis</em><big>)</big><a class="headerlink" href="#showObject" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>obj</strong> &#8211; the scene-graph element on which to focus</li>
<li><strong>axis</strong> &#8211; the axis as string, one of: posX, negX, posY, negY, posZ, negZ</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Zooms so that a given object is fully visible.</p>
</dd></dl>

<dl class="function">
<dt id="getCenter">
<tt class="descname">getCenter</tt><big>(</big><em>domNode</em><big>)</big><a class="headerlink" href="#getCenter" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>domNode</strong> &#8211; the node for which its center shall be returned</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Node center or &#8216;null&#8217; if donNode is not a Shape or Geometry</p>
</td>
</tr>
</tbody>
</table>
<p>Returns the center of a X3DShapeNode or X3DGeometryNode as SF3Vec3f object.</p>
</dd></dl>

<dl class="function">
<dt id="getCurrentTransform">
<tt class="descname">getCurrentTransform</tt><big>(</big><em>domNode</em><big>)</big><a class="headerlink" href="#getCurrentTransform" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>domNode</strong> &#8211; the node for which its transformation shall be returned</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Transformation matrix (or null no valid node is given)</p>
</td>
</tr>
</tbody>
</table>
<p>Returns the current to world transformation of a given node. If no valid
node is given <tt class="docutils literal"><span class="pre">null</span></tt> is returned.</p>
</dd></dl>

<dl class="function">
<dt id="debug">
<tt class="descname">debug</tt><big>(</big><em>show</em><big>)</big><a class="headerlink" href="#debug" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>show</strong> (<em>boolean</em>) &#8211; true/false to show or hide the debug window</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The current visibility status of the debug window (true/false)</p>
</td>
</tr>
</tbody>
</table>
<p>Displays or hides the debug window. If the parameter is omitted, the
current visibility status is returned.</p>
</dd></dl>

<dl class="function">
<dt id="navigationType">
<tt class="descname">navigationType</tt><big>(</big><big>)</big><a class="headerlink" href="#navigationType" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">A string representing the active navigation type.</td>
</tr>
</tbody>
</table>
<p>A readout of the currently active navigation type.</p>
</dd></dl>

<dl class="function">
<dt id="examine">
<tt class="descname">examine</tt><big>(</big><big>)</big><a class="headerlink" href="#examine" title="Permalink to this definition">¶</a></dt>
<dd><p>Switches to examine mode.</p>
</dd></dl>

<dl class="function">
<dt id="lookAt">
<tt class="descname">lookAt</tt><big>(</big><big>)</big><a class="headerlink" href="#lookAt" title="Permalink to this definition">¶</a></dt>
<dd><p>Switches to lookAt mode.</p>
</dd></dl>

<dl class="function">
<dt id="lookAround">
<tt class="descname">lookAround</tt><big>(</big><big>)</big><a class="headerlink" href="#lookAround" title="Permalink to this definition">¶</a></dt>
<dd><p>Switches to lookAround mode.</p>
</dd></dl>

<dl class="function">
<dt id="walk">
<tt class="descname">walk</tt><big>(</big><big>)</big><a class="headerlink" href="#walk" title="Permalink to this definition">¶</a></dt>
<dd><p>Switches to walk mode.</p>
</dd></dl>

<dl class="function">
<dt id="game">
<tt class="descname">game</tt><big>(</big><big>)</big><a class="headerlink" href="#game" title="Permalink to this definition">¶</a></dt>
<dd><p>Switches to game mode.</p>
</dd></dl>

<dl class="function">
<dt id="helicopter">
<tt class="descname">helicopter</tt><big>(</big><big>)</big><a class="headerlink" href="#helicopter" title="Permalink to this definition">¶</a></dt>
<dd><p>Switches to helicopter mode.</p>
</dd></dl>

<dl class="function">
<dt id="resetExamin">
<tt class="descname">resetExamin</tt><big>(</big><big>)</big><a class="headerlink" href="#resetExamin" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets all variables required by examin mode to init state</p>
</dd></dl>

<dl class="function">
<dt id="togglePoints">
<tt class="descname">togglePoints</tt><big>(</big><big>)</big><a class="headerlink" href="#togglePoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggles points attribute</p>
</dd></dl>

<dl class="function">
<dt id="pickRect">
<tt class="descname">pickRect</tt><big>(</big><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><big>)</big><a class="headerlink" href="#pickRect" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1</strong> &#8211; x1 coordinate of rectangle</li>
<li><strong>y1</strong> &#8211; y1 coordinate of rectangle</li>
<li><strong>x2</strong> &#8211; x2 coordinate of rectangle</li>
<li><strong>z2</strong> &#8211; y2 coordinate of rectangle</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>Array of shape elements</p>
<p>Returns an array of all shape elements that are within the picked
rectangle defined by (x1, y1) and (x2, y2) in canvas coordinates</p>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pickMode">
<tt class="descname">pickMode</tt><big>(</big><em>options</em><big>)</big><a class="headerlink" href="#pickMode" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>options</strong> (<em>object</em>) &#8211; An object of properties i.e. options = {&#8216;internals&#8217;: true}</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The current intersect type value suitable to use with changePickMode</p>
<p>Get the current pickmode intersect type. If the option &#8216;internals&#8217;:true is
provided, the interal representation is returned.</p>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="changePickMode">
<tt class="descname">changePickMode</tt><big>(</big><em>type</em>, <em>options</em><big>)</big><a class="headerlink" href="#changePickMode" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>type</strong> (<em>string</em>) &#8211; The new intersect type: idbuf, color, textcoord, or box.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True if the type hase been changed, false otherwise</p>
</td>
</tr>
</tbody>
</table>
<p>Alter the value of intersct type. Can be one of: idbuf, color, textcoord, box.
Other values are ignored.</p>
</dd></dl>

<dl class="function">
<dt id="speed">
<tt class="descname">speed</tt><big>(</big><em>newSpeed</em><big>)</big><a class="headerlink" href="#speed" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>newSpeed</strong> (<em>float</em>) &#8211; The new speed value (optional)</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The current speed value</p>
</td>
</tr>
</tbody>
</table>
<p>Get the current speed value. If parameter is given the new speed value is
set accordingly.</p>
</dd></dl>

<dl class="function">
<dt id="statistics">
<tt class="descname">statistics</tt><big>(</big><em>mode</em><big>)</big><a class="headerlink" href="#statistics" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>mode</strong> (<em>boolean</em>) &#8211; true/false to enable or disable the stats info</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The current visibility of the stats info (true/false)</p>
</td>
</tr>
</tbody>
</table>
<p>Get or set the visibility of the statistics information. If parameter is
omitted, this method returns the visibility status as boolean.</p>
</dd></dl>

<dl class="function">
<dt id="isA">
<tt class="descname">isA</tt><big>(</big><em>domNode</em>, <em>nodeType</em><big>)</big><a class="headerlink" href="#isA" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>domNode</strong> (<em>object</em>) &#8211; the node to test for</li>
<li><strong>nodeType</strong> (<em>string</em>) &#8211; node name to test domNode against</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True or false</p>
</td>
</tr>
</tbody>
</table>
<p>Test a DOM node object against a node type string. This method
can be used to determine the &#8220;type&#8221; of a DOM node.</p>
</dd></dl>

<dl class="function">
<dt id="processIndicator">
<tt class="descname">processIndicator</tt><big>(</big><em>mode</em><big>)</big><a class="headerlink" href="#processIndicator" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>mode</strong> (<em>boolean</em>) &#8211; true to show indicator, false to hide</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The current visibility of the process indicator info (true = visible, false = invisible)</p>
</td>
</tr>
</tbody>
</table>
<p>Enable or disable the process indicator. If parameter is omitted, this method
only returns the the visibility status of the statistics info overlay.</p>
</dd></dl>

<dl class="function">
<dt id="backendName">
<tt class="descname">backendName</tt><big>(</big><big>)</big><a class="headerlink" href="#backendName" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">The current render backend name as string</td>
</tr>
</tbody>
</table>
<p>Returns the currently used render backend name.</p>
</dd></dl>

<dl class="function">
<dt id="properties">
<tt class="descname">properties</tt><big>(</big><big>)</big><a class="headerlink" href="#properties" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">Properties object</td>
</tr>
</tbody>
</table>
<p>Returns the properties object of the X3D element.
This holds all configuration parameters of the X3D element.</p>
</dd></dl>

</div>
<div class="section" id="docs">
<h4>Docs<a class="headerlink" href="#docs" title="Permalink to this headline">¶</a></h4>
<p>The documentation API is a set of static functions (object literal)
which allows to obtain documetantion related information form the
library:</p>
<div class="highlight-python"><pre>var info;
var info_pane;
info = x3dom.docs.getNodeTreeInfo();
info_pane = getElementById('infopane');
info_pane.innerHTML = info;</pre>
</div>
<p>The documentation module is optional and only provided with the
x3dom-full package.</p>
<dl class="function">
<dt id="getNodeTreeInfo">
<tt class="descname">getNodeTreeInfo</tt><big>(</big><big>)</big><a class="headerlink" href="#getNodeTreeInfo" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">A div element containin the nodes and link to specification</td>
</tr>
</tbody>
</table>
<p>Return a div filled with nodes implemented and link to documentation.
This can be used to build interactive documentation.</p>
<p>Note: Unstable API method. Name and retrun value might change</p>
</dd></dl>

<dl class="function">
<dt id="getComponentInfo">
<tt class="descname">getComponentInfo</tt><big>(</big><big>)</big><a class="headerlink" href="#getComponentInfo" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">A div element containin the nodes and link to specification,
grouped by components and sorted alphabetically</td>
</tr>
</tbody>
</table>
<p>Return a div filled with nodes implemented and link to documentation.
This particular method returns the the nodes grouped by components
and sorted alphabetically.</p>
<p>This can be used to build interactive documentation.</p>
<p>Note: Unstable API method. Name and retrun value might change</p>
</dd></dl>

</div>
</div>
<span id="document-nodes/index"></span><div class="section" id="nodes">
<span id="id1"></span><h3>Nodes<a class="headerlink" href="#nodes" title="Permalink to this headline">¶</a></h3>
<p>The following list is a live generated node list. You can only see
this information in a browser. If you are viewing this documentation
in other formats, please visit the <a class="reference external" href="http://x3dom.org/x3dom/test/functional/dumpNodeTypeTree.html">Node Type Tree</a>
document and click on a Node to view the related X3D specification.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Not all nodes and fully implemented right now.</p>
</div>
<div id="internal-node-list"></div>
<script>
document.getElementById('internal-node-list').innerHTML = x3dom.docs.getComponentInfo();
</script></div>
<span id="document-components/index"></span><div class="section" id="components">
<span id="id1"></span><h3>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h3>
<p>X3DOM features a component system which allows you to load parts of the system at runtime. Components are a set of X3D nodes logically grouped together and put into a file. For example, the Geometry2D component consists of nodes named Arc2D, Circle2D, etc and is stored in a file named <tt class="docutils literal"><span class="pre">Geometry2D.js</span></tt>. Those components are then further grouped into <a class="reference external" href="http://www.web3d.org/x3d/specifications/OLD/ISO-IEC-19775-X3DAbstractSpecification/Part01/Architecture.html">profiles</a> which combine them for specific application domains. For example there is a <a class="reference external" href="http://www.web3d.org/x3d/specifications/OLD/ISO-IEC-19775-X3DAbstractSpecification/Part01/coreprofile.html">core profile</a>, an immersive profile, Interchange profile, and so on. Except for the full profile, profiles are an abstract concept and not reflected in file layout.</p>
<p>While logical grouping like this falls mostly into the category of code organization, it can be utilized to load only the parts you need for your application. With X3DOM there are two versions of the library in the distribution package:</p>
<blockquote>
<div><ul class="simple">
<li>the standard full profile file: <tt class="docutils literal"><span class="pre">x3dom-full.js</span></tt></li>
<li>the core containing only basic nodes: <tt class="docutils literal"><span class="pre">x3dom.js</span></tt></li>
</ul>
</div></blockquote>
<p>You will find these files in release directory of X3DOM. Note that this is currently the development version of X3DOM. <a class="reference external" href="http://x3dom.org/download/dev/">http://x3dom.org/download/dev/</a>.</p>
<p>The full profile contains all the nodes of the official <a class="reference external" href="http://www.web3d.org/x3d/specifications/OLD/ISO-IEC-19775-X3DAbstractSpecification/Part01/">X3D specification</a>, as far as they are implemented in X3DOM, merged into one file.</p>
<p>When using <tt class="docutils literal"><span class="pre">x3dom.js</span></tt> (core) you may need to either include or dynamically load additional nodes you need to render your model. This can be achieved by including the required node implementations files in your HTML using the <tt class="docutils literal"><span class="pre">&lt;script&gt;</span></tt> tag, or by instructing X3DOM to load the components at runtime.</p>
<p>By default X3DOM comes with the following additional nodes:</p>
<blockquote>
<div><ul class="simple">
<li>Geometry2D</li>
<li>VolumeRendering</li>
<li>Geospatial</li>
</ul>
</div></blockquote>
<p>If you are using <tt class="docutils literal"><span class="pre">x3dom.js</span></tt> and you need to load the nodes above, you can use one of the methods described below.</p>
<p><em>Note:</em> It is recommended that you use the full X3DOM version (<tt class="docutils literal"><span class="pre">x3dom-full.js</span></tt>) in production environments - unless there is a very specific reason not to. The full version is compacted, optimized and in almost all cases the right way of including X3DOM. Should you opt for using the methods described here, you are trading negligible saving in initial download size for a much slower loading system, additional requests, way more complicated setup and maintenance, inability to use the browsers cache, problems with firewalls, proxy servers, CORS issues, CDNs, and not being able to run run locally without a web server.</p>
<div class="section" id="static-component-loading">
<h4>Static component loading<a class="headerlink" href="#static-component-loading" title="Permalink to this headline">¶</a></h4>
<p>This technique works by manually including the X3DOM core library plus the components you need for rendering your model. Your resulting HTML could look like this.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;x3dom.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;Primitives2D.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;Other.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>Benefits of this approach:</p>
<blockquote>
<div><ul class="simple">
<li>static loading (no ajax requests)</li>
<li>works locally without a web server instance</li>
</ul>
</div></blockquote>
<p>Drawbacks of this approach:</p>
<blockquote>
<div><ul class="simple">
<li>more requests are required</li>
<li>more files to manage in complex setups (could be somewhat mitigated using something like Sprockets)</li>
</ul>
</div></blockquote>
<p>This is essentially how we build the full profile library, except that we deliver everything in one optimized file. When you write your own components, you can use this method - it also works with the full profile X3DOM file.</p>
<p>When to use this method:</p>
<blockquote>
<div><ul class="simple">
<li>When you write your own components</li>
<li>During development and testing</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="dynamic-component-loading">
<h4>Dynamic component loading<a class="headerlink" href="#dynamic-component-loading" title="Permalink to this headline">¶</a></h4>
<p>X3DOM features a mechanism to load files at runtime. With this approach it is possible to load anything from anywhere and inject that code into your application. Be aware of this possible exploit when using the technique described here.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In order to allow dynamic loading of components, you need to tell X3DOM to turn off its security precautions <em>before</em> including the X3DOM library. These precaution prevents the library from executing code that is known to be insecure. Only use this feature if there is absolutely no other option for you.</p>
</div>
<p>In order to disable security measures in X3DOM, put the following statement in your document <tt class="docutils literal"><span class="pre">&lt;head&gt;</span></tt> section and before the inclusion of X3DOM:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;script&gt;</span>
    <span class="nx">X3DOM_SECURITY_OFF</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;x3dom.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  ...
<span class="nt">&lt;/head&gt;</span>
</pre></div>
</div>
<p>Now, dynamic loading components at runtime is enabled and can be used by putting the following parameters in you X3D scene.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;x3d&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;component&quot;</span> <span class="na">value=</span><span class="s">&quot;Primitives2D,Other&quot;</span><span class="nt">&gt;&lt;/param&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;loadpath&quot;</span> <span class="na">value=</span><span class="s">&quot;http://yourserver/path/&quot;</span><span class="nt">&gt;&lt;/param&gt;</span>
    ...
<span class="nt">&lt;/x3d&gt;</span>
</pre></div>
</div>
<p>If <cite>loadpath</cite> is not set X3DOM tries to load the component from the documents parent URL.</p>
<p>Keep in mind that the dynamic loading of X3DOM components performs an <strong>synchronous</strong> Ajax request. As such all the limitations of Ajax requests apply, plus the library is blocking your browser until it gets a response.</p>
<p>Drawbacks of this approach:</p>
<blockquote>
<div><ul class="simple">
<li>load order is important and has to be maintained by developer</li>
<li>needs a web server running (ajax)</li>
<li>blocks the browser during loading of files</li>
<li>code injection possibility high</li>
<li>needs much more requests</li>
<li>ajax request caching not really supported</li>
</ul>
</div></blockquote>
<p>When to use this method:</p>
<blockquote>
<div><ul class="simple">
<li>never (unless there&#8217;s no other feasible way)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="extending-x3dom">
<h4>Extending X3DOM<a class="headerlink" href="#extending-x3dom" title="Permalink to this headline">¶</a></h4>
<p>In this chapter you will learn how to extend X3DOM with your own nodes which you can load using the methods outlined above. We recommend to use the static loading approach in combination with the core profile <tt class="docutils literal"><span class="pre">x3dom.js</span></tt>. This results in the inclusion of <tt class="docutils literal"><span class="pre">x3dom.js</span></tt> and <tt class="docutils literal"><span class="pre">YourComponent.js</span></tt> which will contain your custom code.</p>
<p>To follow this chapter you need at least basic understanding of the following concepts, principles, or technologies:</p>
<blockquote>
<div><ul class="simple">
<li>object orientation</li>
<li>class based object model</li>
<li>programming in general</li>
<li>Javascript programming</li>
<li>the Javascript object model</li>
<li>XML and HTML5</li>
</ul>
</div></blockquote>
<div class="section" id="object-system">
<h5>Object system<a class="headerlink" href="#object-system" title="Permalink to this headline">¶</a></h5>
<p>In order to register a new node within the X3DOM system, you need to create the equivalent of a <em>class</em> that inherits properties from a superclass. Javascript itself does not implement a class based object model, it provides a <a class="reference external" href="http://en.wikipedia.org/wiki/Prototype-based_programming">prototype model</a>. A prototype based object model can be seen as a superset of a traditional class based model. With a prototype based object system, one can implement a more limited class based system. That is exactly what X3DOM does.</p>
<p>For each node you want to implement in X3DOM you need to call the function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x3dom</span><span class="o">.</span><span class="n">registerNodeType</span><span class="p">(</span><span class="s">&quot;YourNodeName&quot;</span><span class="p">,</span> <span class="s">&quot;GroupName&quot;</span><span class="p">,</span> <span class="n">definitionObj</span><span class="p">);</span>
</pre></div>
</div>
<p>This registers a node within the X3DOM system and provides a hook to the implementation of this class. The first parameter also is the name of the XML tag you are writing code for. The third parameter to registerNodeType is the return value of a call to the X3DOM function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">defineClass</span><span class="p">(</span><span class="n">superclassObj</span><span class="p">,</span> <span class="n">constructorObj</span><span class="p">,</span> <span class="n">implementationObj</span><span class="p">);</span>
</pre></div>
</div>
<p>This function is roughly equivalent to creating a class definition in a language with an traditional class based object system.</p>
<p><em>Note:</em> The <tt class="docutils literal"><span class="pre">defineClass</span></tt> function resides in the global Javascript namespace whereas the <tt class="docutils literal"><span class="pre">registerNodeType</span></tt> function is nested within the <tt class="docutils literal"><span class="pre">x3dom</span></tt> namespace. This is intentionally so and not a typo.</p>
</div>
<div class="section" id="hello-world">
<h5>Hello World<a class="headerlink" href="#hello-world" title="Permalink to this headline">¶</a></h5>
<p>Let&#8217;s say we want to implement a custom node which echos a &#8220;Hello World&#8221; to the console, we first need to decided how the XML should look like. In this case, we simply want another XML tag that looks like this:</p>
<div class="highlight-xml"><pre>&lt;x3d&gt;
  &lt;scene&gt;
    &lt;hello&gt;&lt;/hello&gt;    &lt;-- this is new
  &lt;/scene&gt;
&lt;/x3d&gt;</pre>
</div>
<p>Since there is no <em>Hello</em> node in the X3DOM system nothing happens when we run this X3D in the browser. The <tt class="docutils literal"><span class="pre">&lt;hello&gt;</span></tt> tag is not recognized and therefore ignored by X3DOM. In order to make X3DOM aware of the <tt class="docutils literal"><span class="pre">&lt;hello&gt;</span></tt> tag we need to register a new node with the system and provide an implementation for that node. In order to do so we are using the two function calls described above:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">x3dom</span><span class="p">.</span><span class="nx">registerNodeType</span><span class="p">(</span>
    <span class="s2">&quot;Hello&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Core&quot;</span><span class="p">,</span>
    <span class="nx">defineClass</span><span class="p">(</span><span class="nx">x3dom</span><span class="p">.</span><span class="nx">nodeTypes</span><span class="p">.</span><span class="nx">X3DNode</span><span class="p">,</span>
        <span class="kd">function</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">x3dom</span><span class="p">.</span><span class="nx">nodeTypes</span><span class="p">.</span><span class="nx">Hello</span><span class="p">.</span><span class="nx">superClass</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">);</span>
        <span class="p">},</span> <span class="p">{</span>
              <span class="nx">nodeChanged</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">x3dom</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">logInfo</span><span class="p">(</span><span class="s1">&#39;Hello World from the console&#39;</span><span class="p">);</span>
              <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>First, the hello node is registered with X3DOM, the hello node belongs to the core nodes. We then create an implementation object of the type <tt class="docutils literal"><span class="pre">x3dom.nodeTypes.X3DNode</span></tt>, the superclass. We also define a constructor for our node in form of a function object that we pass to the <tt class="docutils literal"><span class="pre">defineClass()</span></tt> function (second positional parameter). The last parameter consists of an object literal containing function definitions for the node API. In this example we implement a function called <tt class="docutils literal"><span class="pre">nodeChanged</span></tt> which will be called by X3DOM anytime there is a change to the node element in the DOM. It is also called when the node is encountered the first time. This is the place where print a message to the console using the X3DOM debug facilities.</p>
<p>The <tt class="docutils literal"><span class="pre">nodeChanged</span></tt> function is not the only function you can pass your implementation. For example, there is a <tt class="docutils literal"><span class="pre">fieldChanged</span></tt> method which is called whenever a attribute in the DOM changes, and you can implement your own methods here.</p>
</div>
<div class="section" id="more">
<h5>More<a class="headerlink" href="#more" title="Permalink to this headline">¶</a></h5>
<p>For more examples of nodes, please refer to <a class="reference external" href="https://github.com/x3dom/x3dom/tree/master/src/nodes">the source code of the X3DOM nodes</a>. It&#8217;s the best way to learn how to deal with the X3DOM node system.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="notes-how-tos">
<h2>Notes &amp; How-Tos<a class="headerlink" href="#notes-how-tos" title="Permalink to this headline">¶</a></h2>
<p>Design notes, legal information and changelog are here for the interested.</p>
<div class="toctree-wrapper compound">
<span id="document-notes/index"></span><div class="section" id="notes">
<span id="id1"></span><h3>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h3>
<p>Different topics of interest. This section should be seen as
incubation space for collaboration and ideas. Ultimately
things move up to the main documentation.</p>
<div class="toctree-wrapper compound">
<span id="document-notes/cors"></span><div class="section" id="loading-resources-from-external-servers">
<span id="cors"></span><h4>Loading resources from external servers<a class="headerlink" href="#loading-resources-from-external-servers" title="Permalink to this headline">¶</a></h4>
<p>Sometimes it is desirable to load resources, like textures, from other
locations than your web server. The most common use case being serving
textures from a <a class="reference external" href="http://en.wikipedia.org/wiki/Content_delivery_network">CDN</a>.
While technically not a problem, there are security mechanisms
in place to prevent injection of malicious code into your application.
Browser vendors started to block loading of resources originating from
domains unless these resources marked safe by the foreign web server.</p>
<p>The corresponding W3C specification is called
Cross-Origin Resource Sharing <a class="reference internal" href="index.html#cors2010">[CORS2010]</a> and adhered to by most browsers.
And in essence, you need to configure the
foreign web server to add a HTTP header that marks the resource safe for
your domain. Say, your application is served from <tt class="docutils literal"><span class="pre">http://yoursite.org</span></tt> and
needs to load resources from <tt class="docutils literal"><span class="pre">http://othersite.org</span></tt>, the webserver of
<tt class="docutils literal"><span class="pre">othersite.org</span></tt> needs to set a HTTP header that marks <tt class="docutils literal"><span class="pre">yoursite.org</span></tt>
safe for cross site requests. For example:</p>
<div class="highlight-python"><pre>Access-Control-Allow-Origin: http://yoursite.org</pre>
</div>
<p>If you don&#8217;t care and want to allow access to all users, you can add e.g.
the following to your httpd.conf (given you are using Apache2):</p>
<div class="highlight-python"><pre>&lt;Directory /&gt;
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Headers "Content-Type"
    Header set Access-Control-Allow-Methods "GET, PUT, OPTIONS, DELETE, POST"
&lt;/Directory&gt;</pre>
</div>
<p>An alternative to adhering to the CORS protocol, is to setting
up a proxy server forwarding requests to the foreign server in the background.
If you can do away with the benefits CDN provides this technique may be
a viable alternative.</p>
<p><em>More information on CORS and setting HTTP headers:</em></p>
<ul class="simple">
<li><a class="reference external" href="http://www.w3.org/TR/cors/">Cross-Origin Resource Sharing</a></li>
<li><a class="reference external" href="http://httpd.apache.org/docs/2.1/en/mod/mod_headers.html">Apache mod_headers</a></li>
<li><a class="reference external" href="http://redmine.lighttpd.net/wiki/1/Docs:ModSetEnv">Lighttpd mod_setenv</a></li>
<li><a class="reference external" href="http://wiki.nginx.org/HttpHeadersModule">NGINX headers module</a></li>
<li><a class="reference external" href="http://enable-cors.org/">Others</a></li>
</ul>
<p><em>More information on proxy configuration:</em></p>
<ul class="simple">
<li><a class="reference external" href="http://httpd.apache.org/docs/2.1/mod/mod_proxy.html">Apache mod_proxy</a></li>
<li><a class="reference external" href="http://redmine.lighttpd.net/wiki/1/Docs:ModProxy">Lighttpd ModProxy</a></li>
<li><a class="reference external" href="http://wiki.nginx.org/HttpProxyModule">NGINX proxy module</a></li>
</ul>
<div class="section" id="developing-locally">
<h5>Developing locally<a class="headerlink" href="#developing-locally" title="Permalink to this headline">¶</a></h5>
<p>While the HTTP headers method presented above is the best practice
in production environments, it is unpractical for local development
of your application. Fortunately there are a couple of workarounds
making you develop with pleasure.</p>
<ul class="simple">
<li>Use a real web server (e.g. Apache) to deliver your site locally</li>
<li>Use a web server with proxy module to fetch external resources
form a live website</li>
<li>Use browser flags to disable security measures</li>
</ul>
<p>The latter one being the most flaky. It is not guaranteed that
the browser will support disabling security in the long run. Also
strange behaviour in case of magically enabled security after
updates in combination with browser caches.</p>
<div class="section" id="using-a-web-server">
<h6>Using a web server<a class="headerlink" href="#using-a-web-server" title="Permalink to this headline">¶</a></h6>
<p>Installing a web server locally and serving your files under
the localhost domain is the best way of developing web applications. We also
recommend you use this technique when developing with X3DOM. Using a full web
stack locally ensures that your browser behaves the same way it would when
loading a website over the internet. Requests are sent and received by the
browser just like they would in a production environment. It is also
the only way to properly test Ajax functionality and HTTP features, like
expiry headers.</p>
<p>There are various ways to install a web server on your machine. In case of
Mac OS X, Apache is already installed and you can just put your documents in
your <cite>Site</cite> folder.</p>
<p>On Linux there are
<a class="reference external" href="http://www.google.com/?q=linux+apache+howto">various ways to install Apache</a>
depending on your distribution. Most likely two or three commands should
suffice.</p>
<p>Windows users are best served with a package called
<a class="reference external" href="http://www.apachefriends.org">XAMPP</a>, which also caters  various Unix based
systems.</p>
</div>
<div class="section" id="using-a-web-server-with-proxy-pass">
<h6>Using a web server with proxy pass<a class="headerlink" href="#using-a-web-server-with-proxy-pass" title="Permalink to this headline">¶</a></h6>
<p>What about external resources in local development, I want to develop locally
and load textures from <tt class="docutils literal"><span class="pre">textureheaven.net</span></tt>. You could install as system wide
proxy server, which processes the request and response to <tt class="docutils literal"><span class="pre">textureheaven.net</span></tt>
and adds the correspoding CORS header to the response. Another straight forward
way is to leverage the power of what you already have: your local web server.</p>
<p>The setup is more elaborate and out of the scope of this document. Here are
some pointer of how to get started.</p>
<p>First you need to confiture your web server to answer requests to
<tt class="docutils literal"><span class="pre">textureheaven.net</span></tt> instead of sending those requests to the real
<tt class="docutils literal"><span class="pre">textureheaven.net</span></tt> web server. To do so you need to make an entry in
your <tt class="docutils literal"><span class="pre">/etc/hosts</span></tt> file so the address does not resolve to the real site
but to <tt class="docutils literal"><span class="pre">localhost</span></tt>. Within your web server configuration you now create
a virtual host that answers requests to <tt class="docutils literal"><span class="pre">textureheaven.net</span></tt> and proxies
them request to the real <tt class="docutils literal"><span class="pre">textureheaven.net</span></tt> site. In order to make this
all work, you finally need to add a CORS header to the response
(e.g. <tt class="docutils literal"><span class="pre">Access-Control-Allow-Origin:</span> <span class="pre">http://localhost</span></tt>)</p>
<p>Sounds too complicated? There&#8217;s a shortcut way. But as with all shortcuts,
use it with caution.</p>
</div>
<div class="section" id="disable-browser-security">
<h6>Disable browser security<a class="headerlink" href="#disable-browser-security" title="Permalink to this headline">¶</a></h6>
<p>If you have all resources locally, there is a shortcut for circumventing
the CORS mechanisms. Please use with care.</p>
<div class="section" id="chrome">
<h7>Chrome<a class="headerlink" href="#chrome" title="Permalink to this headline">¶</a></h7>
<p>The Chrome browser allows you to disable a security precaution that prevents
you loading resources from disk. Use the following startup parameters:</p>
<div class="highlight-python"><pre>--allow-file-access-from-files
--allow-file-access
--disable-web-security</pre>
</div>
</div>
<div class="section" id="firefox">
<h7>Firefox<a class="headerlink" href="#firefox" title="Permalink to this headline">¶</a></h7>
<p>Enter the following in your location bar:</p>
<div class="highlight-python"><pre>about:config</pre>
</div>
<p>Acknowledge the secuirty warning and enter the following in the filter bar:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">fileuri</span>
</pre></div>
</div>
<p>Look for the option called <strong>security.fileuri.strict_origin_policy</strong> and
set it to <strong>false</strong>.</p>
<table class="docutils citation" frame="void" id="cors2010" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[CORS2010]</a></td><td>Cross-Origin Resource Sharing, W3C, 2010.
Available online at <a class="reference external" href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a></td></tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<span id="document-notes/complex_models"></span><p id="complex-models"><em>+++ Draft +++</em></p>
<div class="section" id="id1">
<h4>Complex models<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>While X3DOM is very well suited for small models up to a few
kilobytes in size, big models can become a major problem. This
section takes a look at the different aspects involved and
tries to find partial solutions to the problem. The problems can
be broken down to the following areas:</p>
<blockquote>
<div><ul class="simple">
<li>Loading a HTML/X3D file containing a lot of data</li>
<li>Parsing data into the DOM</li>
<li>Storing data in memory</li>
</ul>
</div></blockquote>
<p>And server side:</p>
<blockquote>
<div><ul class="simple">
<li>I/O when sending big files (sendfile)</li>
<li>Server stalling because user presses &#8220;reload&#8221; endlessly when
not informed that an operation is in progress and consequently
exhausting free server slots.</li>
</ul>
</div></blockquote>
<p>While most of these problems are inherent to the domain we are moving in,
and not X3DOM specific, measures can be taken to optimize loading of
large chunks of data, especially cutting down transmission time over
the network.</p>
<p>Another, more complex problem, is presented by the way JavaScript and DOM
work. There is no manual memory management possible and freeing up memory
is left to the garbage collector that runs at intervals out of our control.
We can not even manually start garbage collection. And if we could, there
is quite some overhead involved in garbage collection.</p>
<p>The only alternative to cope with the memory specific problem is
circumventing the DOM entirely parsing. While this somewhat defies the
purpose of X3DOM, it may present a viable alternative for performance critical
applications. Various techniques and ideas are explored further in the
following sections.</p>
<p>It is paramount to keep in mind, no matter how much we optimize, the use of
complex models is limited by the following boundaries:</p>
<blockquote>
<div><ul class="simple">
<li>Memory of client (storing more data)</li>
<li>Processing power of client machine (parsing more faster)</li>
</ul>
</div></blockquote>
<p>In the following sections we are presenting various tools and techniques
to optimize various aspects of loading big models.</p>
<div class="section" id="delivering-deflated-content-http-1-1">
<h5>Delivering deflated content (HTTP/1.1)<a class="headerlink" href="#delivering-deflated-content-http-1-1" title="Permalink to this headline">¶</a></h5>
<p>The most obvious idea is to compress the HTML/XML files. Luckily this is
the easiest to implement and will improve performance of loading time
significantly. Most web browsers support the deflate algorithms (ZIP) and
can handle compressed files on the fly. The web server is configured to
compress HTML files before delivering them to the client. By means of
setting the HTTP (<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html">Accpet-Encoding</a>),
header, denoting a compressed file arrives, the client can act on this
information and decompress the deflated file on the fly. Any browser
that supports the HTTP/1.1 should be able to handle deflated input.</p>
<p>In order to enable your webserver to compress the files during
transport, the configuration needs to be alterd. How to achieve this
can be found in you web server documentation. For exmaple:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://httpd.apache.org/docs/current/mod/mod_deflate.html">Apache</a></li>
<li><a class="reference external" href="http://wiki.nginx.org/HttpGzipModule">NGINX</a></li>
<li><a class="reference external" href="http://redmine.lighttpd.net/wiki/1/Docs:ModCompress">Lighttpd</a></li>
</ul>
</div></blockquote>
<p>If you are using a different web server, refer to its documentation.</p>
<p><strong>Benefits</strong></p>
<p>It is considered good practice for web development to enable in-memory
compression for text resources like HTML, CSS, JS. Tests showed that
file size can be reduced to about 50%. Transmission time should be
typically cut in half. For exmaple, the vary large model of the walking
soldier () is about 13MB in size. Using GZIP compression, this model
is only 5.2MB big.</p>
<p><strong>Drawbacks</strong></p>
<p>This method does not present us with any significant drawbacks.</p>
<p>A slight overhead on server- and client-side processing power is
inherent with on-the-fly compression. Caching techniques of
web servers and browser mitigate the small performance hit of
on-the-fly compression.</p>
<p>An actual benchmark of decompressing the soldier model has not
yet been conducted. However the ventured guess is that the savings
of network time outperform the decompression algorithm which
runs naively.</p>
<p>For very large files this technique may not be beneficial since
the server may block too long during compression or the client,
especially with slow clients, may take to long to decompress. This
however needs to be verified and tested.</p>
<p>We recommend to enable compression on your web server and only out out
if there are  performance hits than can be attributed to compression.</p>
</div>
<div class="section" id="makeing-use-of-browser-side-caching">
<h5>Makeing use of browser side caching<a class="headerlink" href="#makeing-use-of-browser-side-caching" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><ul class="simple">
<li>Etags</li>
<li>Expire headers</li>
<li>HTML5 offline stuff?</li>
<li>etc.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="using-asynchronous-loading-aka-ajax">
<h5>Using asynchronous loading (aka Ajax)<a class="headerlink" href="#using-asynchronous-loading-aka-ajax" title="Permalink to this headline">¶</a></h5>
<p>X3D inline
Ajax</p>
<p><strong>Benefits</strong></p>
<p><strong>Drawbacks</strong></p>
<p>The most significant drawback of the current XMLHttpRequest object
implementations is the complete ignorance of the HTTP Accept-Encoding
header. While lazy loading geometry data is possible using either the
X3D inline element or custom code to load a model and modify the DOM,
the lack of compression makes this process rather slow.</p>
</div>
<div class="section" id="using-geometry-images">
<h5>Using geometry images<a class="headerlink" href="#using-geometry-images" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://research.microsoft.com/en-us/um/people/hoppe/proj/gim/">http://research.microsoft.com/en-us/um/people/hoppe/proj/gim/</a></li>
<li><a class="reference external" href="http://graphicrants.blogspot.com/2009/01/virtual-geometry-images.html">http://graphicrants.blogspot.com/2009/01/virtual-geometry-images.html</a></li>
<li><a class="reference external" href="http://www.cs.jhu.edu/%7Ebpurnomo/">http://www.cs.jhu.edu/%7Ebpurnomo/</a></li>
<li><a class="reference external" href="http://www.uni-koblenz.de/~cg/Studienarbeiten/gpu_mesh_painting_ritschel.pdf">http://www.uni-koblenz.de/~cg/Studienarbeiten/gpu_mesh_painting_ritschel.pdf</a></li>
<li><a class="reference external" href="http://wiki.secondlife.com/wiki/Sculpted_prim">http://wiki.secondlife.com/wiki/Sculpted_prim</a></li>
</ul>
</div></blockquote>
<p><strong>Benefits</strong></p>
<blockquote>
<div><ul class="simple">
<li>Uses canvas to decode (native speed)</li>
<li>Circumvents the DOM for better performance</li>
</ul>
</div></blockquote>
<p><strong>Drawbacks</strong></p>
<blockquote>
<div><ul class="simple">
<li>Circumvents the DOM</li>
<li>Use cases limited to simpler geometry?</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="web-server-optimizations">
<h5>Web server optimizations<a class="headerlink" href="#web-server-optimizations" title="Permalink to this headline">¶</a></h5>
<p>Optimization of a web server is not exactly a core topic of X3DOM. To give you
a starting point, we collected some resources that should get you going:</p>
<blockquote>
<div><ul class="simple">
<li>Apache</li>
<li>YSlow</li>
<li>yada, et cetera et al.</li>
</ul>
</div></blockquote>
</div>
</div>
<span id="document-notes/platforms"></span><div class="section" id="platform-notes">
<span id="platforms"></span><h4>Platform Notes<a class="headerlink" href="#platform-notes" title="Permalink to this headline">¶</a></h4>
<div class="section" id="system-requirements-and-browser-notes">
<h5>System requirements and browser notes<a class="headerlink" href="#system-requirements-and-browser-notes" title="Permalink to this headline">¶</a></h5>
<p>In order to be able to work with X3DOM, you need a WebGL enabled web browser.
We also support different fallback models for browsers not supporting WebGL
natively. The best support of features however is only ensured with a browser
sporting a WebGL implementation. You can check the status of supported
browser <a class="reference external" href="http://www.x3dom.org/?page_id=9">here</a>.</p>
</div>
<div class="section" id="chrome">
<h5>Chrome<a class="headerlink" href="#chrome" title="Permalink to this headline">¶</a></h5>
<p>Recent releases of Chrome require you to enable WebGL. Please use the following
command parameters when launching chrome:</p>
<div class="highlight-python"><pre>--enable-webgl
--use-gl=desktop
--log-level=0
--allow-file-access-from-files
--allow-file-access</pre>
</div>
<p>The last two options enable the browser to load textures from disk. You will
need this if you are developing your site locally.</p>
<div class="section" id="platform-notes-os-gpu-drivers">
<h6>Platform notes (OS/GPU/Drivers)<a class="headerlink" href="#platform-notes-os-gpu-drivers" title="Permalink to this headline">¶</a></h6>
<p>While WebGL is supported in most current browsers, there are various little
differences in operating system and graphics driver support. We can not discuss
any possible OS/GPU/Driver combination here, but you might find some valuable
hints if you can not get WebGL up and running on your system. With all systems
be sure to use latest drivers for your graphics card and be sure those drivers
support the OpenGL standard.</p>
</div>
</div>
<div class="section" id="blacklists">
<h5>Blacklists<a class="headerlink" href="#blacklists" title="Permalink to this headline">¶</a></h5>
<p>Some GPUs and Driver combinations are blacklisted by browser vendors. In case
of strange errors, please check the following lists for:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://wiki.mozilla.org/Blocklisting/Blocked_Graphics_Drivers">Mozilla</a></li>
<li><a class="reference external" href="http://src.chromium.org/viewvc/chrome/trunk/src/chrome/browser/resources/software_rendering_list.json">Chrome</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="windows">
<h5>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h5>
<p><strong>Chrome Frame</strong></p>
<p>Currently, the only way to use WebGL with Internet Explorer is by using the Google <a class="reference external" href="http://code.google.com/chrome/chromeframe/">Chrome Frame plugin</a>. In order to make X3DOM use the WebGL renderer with Internet Explorer, you need to install Chrome Frame and enable it in your HTML or web browser configuration. The most simple way to enable ChromeFrame is to put this line in your HTML head section:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content=</span><span class="s">&quot;chrome=1&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Download and furhter reading:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://code.google.com/chrome/chromeframe/">Chrome Frame</a></li>
<li><a class="reference external" href="http://www.chromium.org/developers/how-tos/chrome-frame-getting-started">Getting started</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="mac-os-x">
<h5>Mac OS X<a class="headerlink" href="#mac-os-x" title="Permalink to this headline">¶</a></h5>
<p>Safari 5.1+ is supporting WebGL, however you need to enable it in the Developer menu.
This menu is invisible by default. Go to &#8220;Preferences&#8221; (Cmd-,) and select the
&#8220;Advaned&#8221; tab. Enable the option &#8220;Show Develop menu in menu bar&#8221;.</p>
<p><strong>Rubber band scrolling in Mac OS X 10.7 Lion</strong></p>
<p>On Mac OS Lion, with Apple input devices scrolling behaves differently. When reaching the end of a page, a rubber band effect kicks in. This behavior is also present on iOS devices.</p>
<p>If you don&#8217;t like the effect, you can turn if off using a CSS rule:</p>
<div class="highlight-css"><div class="highlight"><pre><span class="nt">body</span> <span class="p">{</span> <span class="k">overflow</span><span class="o">:</span> <span class="k">hidden</span> <span class="p">}</span>
</pre></div>
</div>
<p>Keep in mind that this rule changes the default behavior of your browser and scrollbars might disappear entirely. It is only a workaround and the preferred fix is to wait for Apple to provide a switch to turn this functionality off. Also note that the rubber band scrolling might not be visible at all with non Apple pointing devices.</p>
</div>
<div class="section" id="ubuntu-linux">
<h5>Ubuntu Linux<a class="headerlink" href="#ubuntu-linux" title="Permalink to this headline">¶</a></h5>
<p>In order to enable WebGL for Firefox 4 and above you need to:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Install the libosmesa6 package. You can do so by issuing
the the following command in a terminal window or one of the consoles:</p>
<div class="highlight-python"><pre>sudo apt-get install libosmesa6</pre>
</div>
</li>
<li><p class="first">Open the Firefox application and enter <em>about:config</em> in the
location bar and <em>webgl</em> in the filter box.</p>
</li>
<li><p class="first">Set the option <em>webgl.force-enable</em> and <em>webgl.prefer-native-gl</em> to <em>true</em></p>
</li>
<li><p class="first">Set <em>webgl.osmesalib</em> to the the path of the library you installed
in step 1, usually thi should be: <tt class="docutils literal"><span class="pre">/usr/lib/libOSMesa.so.6</span></tt></p>
</li>
<li><p class="first">Restart Firefox</p>
</li>
</ol>
</div></blockquote>
</div>
</div>
<span id="document-notes/compatibility_matrix"></span><div class="section" id="compatibility-matrix">
<span id="id1"></span><h4>Compatibility Matrix<a class="headerlink" href="#compatibility-matrix" title="Permalink to this headline">¶</a></h4>
<p>This section should contain a collection of known working/not working
combinations of browsers, GFX cards, operating systems, etc.</p>
<p>There&#8217;s much to do, so we&#8217;d appreciate any feedback from you.</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="18%" />
<col width="15%" />
<col width="13%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<tbody valign="top">
<tr><td>&nbsp;</td>
<td>Mozilla 5/Win</td>
<td>Mozilla 5/Mac</td>
<td>Safari/Mac</td>
<td>Safari/Win</td>
<td>IE9</td>
</tr>
<tr><td>NVIDIA GeForce 9400M 256 MB</td>
<td>&nbsp;</td>
<td>WebGL</td>
<td>WebGL</td>
<td>No</td>
<td>Flash 11</td>
</tr>
<tr><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr><td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<span id="document-notes/faq"></span><div class="section" id="faq">
<span id="id1"></span><h4>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><strong>Q: Why declarative 3D in HTML? Can I not just use WebGL, O3D, etc.</strong></dt>
<dd><p class="first"><a class="reference external" href="http://www.khronos.org/news/press/releases/khronos-webgl-initiative-hardware-accelerated-3d-graphics-internet/">WebGL</a>, <a class="reference external" href="http://code.google.com/apis/o3d/">O3D</a> or [your favorite 3D-JS lib] are made by gfx-coders for
gfx-coders who know how to deal with a 4×4 transformation matrix and
speak GLSL as their first language. Most web-page developer have a
different profile. They just would like to build their 3D-UI,
Visual-Analytics or Web-Shop application and want to utilize some 3D
technology.</p>
<p class="last">If you build the next high-end browser-based online game or visualization
demo then use WebGL or O3D. But if you simply need some 3D elements in
your Web-App then try X3DOM.</p>
</dd>
<dt><strong>Q: Why X3D? Can I not just use Collada, VRML, OBJ, etc.</strong></dt>
<dd><p class="first">3D (X)HTML-ized graphics requires a royalty-free, open and standardized
XML-encoded format. Therefore <a class="reference external" href="http://www.khronos.org/collada/">Collada</a> or <a class="reference external" href="http://www.web3d.org/about/overview/">X3D</a> are the best candidates
(however you can easily <a class="reference external" href="http://www.instantreality.org/tools/x3d_encoding_converter/">convert VRML to X3D-XML</a>).</p>
<p class="last"><a class="reference external" href="http://www.khronos.org/collada/">Collada</a> is really designed as interchange and intermediate format to
transport and manage your 3D data. The <a class="reference external" href="http://www.khronos.org/files/collada_spec_1_5.pdf">Collada specification</a> does not include, unlike
X3D, a <a class="reference external" href="http://www.web3d.org/x3d/specifications/ISO-IEC-19775-1.2-X3D-AbstractSpecification/Part01/concepts.html#Runtimeenvironment">runtime or event model</a>, which is needed for
per-frame updates on the 3D-side (e.g. animations). Therefore this project
uses a well defined <a class="reference external" href="http://www.x3dom.org/?page_id=158">subset of X3D</a> (called Profile in the X3D-World) for X3DOM. For more background information
about how Collada and X3D relate and why <strong>“X3D is ideal for the Web”</strong>
please read the <a class="reference external" href="http://www.khronos.org/collada/presentations/Developing_Web_Applications_with_COLLADA_and_X3D.pdf">Whitepaper</a> by <a class="reference external" href="http://software.intel.com/en-us/blogs/author/remi-arnaud/">Rémi Arnaud</a> and <a class="reference external" href="http://flux.typepad.com/">Tony Parisi</a>.</p>
</dd>
</dl>
<p><strong>Q: Why JS? Can you not write the system/plugin in C++, Java, …</strong></p>
<blockquote>
<div><p>Well, the developer of this project worked on different native <a class="reference external" href="http://www.web3d.org/x3d/content/examples/X3dResources.html#Applications">commercial and open-source X3D-runtimes</a>
before. The limitations of the current plugin interface (e.g. how to
monitor DOM-changes) would make a implementation hard or even imposible.</p>
<p>In addition, we just wanted an open source test environment, which is
small, works without any plugin and can be easily modified to inspire and
follow the integration-model easily. And first tests showed that the
increasing performance of JavaScript and WebGL would lead to impressive
results.</p>
</div></blockquote>
<p><strong>Q: Why any standardization and native implementation if there is already the X3DOM-JS runtime?</strong></p>
<blockquote>
<div>Short answer: Feature and Speed. The current JS/WebGL layer does not allow
to implement e.g. spatial <a class="reference external" href="http://www.web3d.org/x3d/specifications/ISO-IEC-19775-1.2-X3D-AbstractSpecification/Part01/components/sound.html#Sound">Sound</a> or specific image loader and
although WebGL is an impressive step forward we still have to do all the
scene management and updates in JS.</div></blockquote>
</div>
<span id="document-notes/resources"></span><div class="section" id="resources">
<span id="resouces"></span><h4>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h4>
<div class="section" id="books-and-tutorials">
<h5>Books and Tutorials<a class="headerlink" href="#books-and-tutorials" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><a class="reference external" href="http://x3dgraphics.com/examples/X3dForWebAuthors/">X3D for Web Authors</a> by Don Brutzman and Leonard Daly</li>
</ul>
</div>
<div class="section" id="debugging">
<h5>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><a class="reference external" href="http://benvanik.github.com/WebGL-Inspector/">WebGL inspector</a> a in-browser debugger for WebGL apps</li>
<li><a class="reference external" href="http://www.web3d.org/x3d/tools/schematron/X3dSchematron.html">X3D Schematron Validation and Quality Assurance</a></li>
</ul>
</div>
<div class="section" id="specifications">
<h5>Specifications<a class="headerlink" href="#specifications" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><a class="reference external" href="http://www.web3d.org/x3d/specifications/">X3D specifications</a></li>
</ul>
</div>
<div class="section" id="tools-and-converters">
<h5>Tools and Converters<a class="headerlink" href="#tools-and-converters" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><a class="reference external" href="http://www.web3d.org/x3d/stylesheets/X3dToX3dom.xslt">XSLT to convert X3D to XHTML</a> A stylesheet to convert .x3d scenes to X3DOM xhtml encoding by Don Brutzman</li>
</ul>
</div>
</div>
</div>
</div>
<span id="document-releasenotes"></span><div class="section" id="release-notes">
<span id="releasenotes"></span><h3>Release notes<a class="headerlink" href="#release-notes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="version-1-5-1">
<h4>Version 1.5.1<a class="headerlink" href="#version-1-5-1" title="Permalink to this headline">¶</a></h4>
<p>Maintenance release, with lot of bug fixes. Recommended upgrade for 1.5
users.</p>
</div>
<div class="section" id="version-1-5">
<h4>Version 1.5<a class="headerlink" href="#version-1-5" title="Permalink to this headline">¶</a></h4>
<p>We are proud to announce the release of X3DOM 1.5. This most recent
installment of our popular Declarative3D polyfill shines with lots of
new features and a wagon load full of bugfixes.</p>
<p>With version 1.5, X3DOM also overcomes some limits of the scenegraph
structure by using new internal structures for culling and fast
rendering, decoupled from the frontend graph inside the DOM, which,
however, still remains intact as usual.</p>
<div class="section" id="new-features">
<h5>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p class="first">Generally improved traversal and rendering performance with a new
transformation and volume caching infrastructure</p>
</li>
<li><p class="first">Culling techniques for large model rendering (some of them still
experimental) - check the <a class="reference external" href="http://www.youtube.com/watch?v=2Nd4af3iHdM">video</a>, or see the <a class="reference external" href="http://x3dom.org/docs/dev/tutorial/culling.html">tutorial</a></p>
</li>
<li><dl class="first docutils">
<dt>Improved experimental binary geometry container and encoding</dt>
<dd><ul class="first last simple">
<li>BinaryGeometry with more compact encoding that only uses 7 Bytes per
triangle (see <a class="reference external" href="http://x3dom.org/x3dom/example/x3dom_buddhaBG.html">example</a>) and works nicely on mobile devices</li>
<li>POPGeometry for progressive streaming and LOD - see the paper and project
page <a class="reference external" href="http://x3dom.org/pop/">here</a>, or directly check some <a class="reference external" href="http://examples.x3dom.org/pop-pg13/happy.html">examples</a></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Experimental BVH Refiner node, for rendering of large, regular data sets
with dynamic LOD (see <a class="reference external" href="http://examples.x3dom.org/BVHRefiner/BVHRefiner.html">example</a>)</p>
</li>
<li><p class="first">Shadow support for large scenes and all lights types (see <a class="reference external" href="http://x3dom.org/docs/dev/tutorial/shadows.html">tutorial</a> for more
information or click <a class="reference external" href="http://x3dom.org/x3dom/example/x3dom_animatedLights.xhtml">here</a> or for a <a class="reference external" href="http://examples.x3dom.org/binaryGeo/oilrig_demo/index.html">demo</a>)</p>
</li>
<li><p class="first">CADGeometry component (not part of the HTML profile)</p>
</li>
<li><p class="first">Extrusion (and many more geometric 3D primitives in additional
Geometry3DExt component, also not part of the HTML profile)</p>
</li>
<li><p class="first">Convenience object &#8216;Moveable&#8217; for <a class="reference external" href="http://x3dom.org/x3dom/example/x3dom_uiEvents.html">object manipulation</a></p>
</li>
<li><dl class="first docutils">
<dt>Additional X3D component plugins (not part of the HTML profile and x3dom.js package)</dt>
<dd><ul class="first last simple">
<li>CADGeometry component</li>
<li>Geometry3D component (e.g. Extrusion, missing level 4 nodes)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="fixes-and-improvements">
<h5>Fixes and Improvements<a class="headerlink" href="#fixes-and-improvements" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>Many internal <a class="reference external" href="https://github.com/x3dom/x3dom/issues?milestone=&amp;page=1&amp;state=closed">improvements and bugfixes</a></li>
<li>Route removal implemented</li>
<li>Improved picking functionality to enhance trade-off between precision
and number of possible ids</li>
<li>Fullscreen convenience method <tt class="docutils literal"><span class="pre">x3dom.toggleFullScreen()</span></tt></li>
<li>RenderedTexture extensions for rendering normal buffer or stereo
(currently only for Oculus Rift)</li>
</ul>
<p>For a detailed list of changes refer to the <a class="reference external" href="http://x3dom.org/download/1.5/CHANGELOG">CHANGELOG</a> file.</p>
<p>Grab the frozen 1.5.0 version here:</p>
<blockquote>
<div><a class="reference external" href="http://x3dom.org/download/1.5/">http://x3dom.org/download/1.5/</a></div></blockquote>
</div>
</div>
<div class="section" id="version-1-4">
<h4>Version 1.4<a class="headerlink" href="#version-1-4" title="Permalink to this headline">¶</a></h4>
<p>Welcome to X3DOM 1.4!</p>
<p>After almost one year in the making we are proud to announce a new X3DOM release.
With this latest installment of our defacto standard JavasSript library that marries
HTML with declarative 3D content, we provide many fixes and enhancements.</p>
<div class="section" id="new-in-1-4">
<h5>New in 1.4<a class="headerlink" href="#new-in-1-4" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Experimental geometry nodes that externalize vertex data in binary containers:</dt>
<dd><ul class="first last simple">
<li>ImageGeometry (which holds vertex attributes in images),</li>
<li>BinaryGeometry (which holds vertex data in binary files,
where attributes can have - besides standard 32-bit - 8-bit and 16-bit precision),</li>
<li>BitLODGeometry (which also holds vertex attributes in external files,
though here the containers can consist of variable bit precision for JPEG-like effects)</li>
<li>Tutorial for image and binary geometry generation (<a class="reference internal" href="index.html#aopt"><em>Analyzing and optimizing your model for the 3D Web</em></a>)</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">OrthoViewpoint and Viewfrustum</p>
</li>
<li><p class="first">Basic support for VolumeRendering component (VolumeData node, OpacityMapVolumeStyle, MPRVolumeStyle)</p>
</li>
<li><p class="first">Programmatic documentation API (<a class="reference internal" href="index.html#runtime-api"><em>API</em></a>)</p>
</li>
<li><p class="first">MultiTouch integration now supporting iOS devices, Chrome, and Mozilla</p>
</li>
<li><p class="first">Added attribute setters, viewpointChanged event, helicopter mode etc.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="enhancements-and-fixes">
<h5>Enhancements and Fixes<a class="headerlink" href="#enhancements-and-fixes" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><ul>
<li><p class="first">Enhanced picking with a max. of 65,535 objects, while the corresponding mouse or touch event
also provides the picked position with 16-bit precision and the object normal at this position</p>
</li>
<li><p class="first">More rendering features like the sortKey/sortType Appearance fields for defining the
rendering order, or the DepthMode (App. child) to define if an object shall be readOnly</p>
</li>
<li><dl class="first docutils">
<dt>Multiline Text support per specification</dt>
<dd><ul class="first last simple">
<li>changed FontStyle size field to X3D default behavior</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Enhanced JavaScript runtime API now with a plenthora of additional methods  (<a class="reference internal" href="index.html#runtime-api"><em>API</em></a>)</p>
</li>
<li><p class="first">Lots of Flash backend fixes (e.g., LOD now also in Flash renderer supported)</p>
</li>
<li><p class="first">Many more bugfixes in IndexedFaceSet, skybox background node etc.</p>
</li>
</ul>
</div></blockquote>
<p>For a complete and exhaustive list of changes, please refer to the <a class="reference external" href="http://x3dom.org/download/1.4/CHANGELOG">CHANGELOG</a>
file or <a class="reference external" href="https://github.com/x3dom/x3dom/issues?page=1&amp;sort=updated&amp;state=closed">GitHub Issue Tracker</a>.</p>
<p>You can get the this X3DOM release from:</p>
<blockquote>
<div><a class="reference external" href="http://x3dom.org/download/1.4/">http://x3dom.org/download/1.4/</a></div></blockquote>
</div>
</div>
<div class="section" id="version-1-3">
<h4>Version 1.3<a class="headerlink" href="#version-1-3" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Our participation at the W3C was officially launched</li>
<li>We have moved from SF to GitHub</li>
<li>We have added some unit tests</li>
<li>We have renewed our documentation and added some tutorials</li>
<li>We have added component support for X3DOM to hold the core tight and allow (non-)standardized extensions</li>
<li>With the release of Flash 11 we are now able to use a non-beta API for the Flash fallback</li>
<li><tt class="docutils literal"><span class="pre">`&lt;x3d</span> <span class="pre">src='foo.x3d'</span> <span class="pre">/&gt;`</span></tt> support allows integration of 3D content like
native images. Note: this will not behave like including images and only work in a client/server
environment due the fact that we have to use the XMLHttpRequest functionality</li>
<li>We have redesigned our multitouch support. It now works on iOS devices and
multitouch setups with Mozilla. For Android and Firefox there seem to be
some bugs in the android implementation and this should work only
after these bugs are closed</li>
<li>We worked on the WebGL-backend, reducing the shader complexity to run on
mobile hardware. The shaders are now chosen using a cabs-like system.</li>
<li>Added support for billboards</li>
<li>Redesigned our build system</li>
<li>We have implemented functionality for reflecting inlined scenes into the
namespace of parent scenes. With this it is now possible to access
elements from the parent scene to address elements within the inlined
scene. Due to the lack of supporting such a concept in the X3D and
HTML standard we have made use of a custom extension (see field
nameSpaceName)</li>
<li>Inline support in a flash renderer</li>
<li>Support for a <tt class="docutils literal"><span class="pre">`&lt;param&gt;`</span></tt> tag. This allows to configure
the framework runtime at a single point</li>
<li>Extended triangulation for generating triangles out of concave geometry</li>
<li>New components</li>
<li>Various fixes &amp; new features</li>
</ul>
</div></blockquote>
<p>With the new component model we have added the first two optional components:</p>
<blockquote>
<div><ul class="simple">
<li>2D primitive support for the use of elements like rectangles, discs, lines, etc.</li>
<li>Initial support for some GEO referencing elements from the X3D specification</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-1-2">
<h4>Version 1.2<a class="headerlink" href="#version-1-2" title="Permalink to this headline">¶</a></h4>
<p>After many months of work, we’re proud to announce the release today of
X3DOM 1.2. There’s plenty of cool stuff we have worked on since the last
release. You can also swing by the downloads page to grab a copy of the
release package:</p>
<p><a class="reference external" href="http://x3dom.org/x3dom/release/">http://x3dom.org/x3dom/release/</a></p>
<p>The new version supports an additional render-backend. The system now looks
for a Flash11 plugin if the browser does not provide a SAI-Plugin or WebGL
interface. This enables the user to view X3DOM pages, with some restrictions,
using the Internet Explorer 9 browser. It utilizes the Adobe Flash MoleHill
3D-API for GPU-Accelerated rendering. To use Adobe Flash-based X3DOM you need
the latest Adobe Flash Player Incubator build (11.01.3d).</p>
<p>Our <tt class="docutils literal"><span class="pre">x3dom.swf</span></tt> must either be placed in the same folder as your xhtml/html
files, or you can specify a path with the swfpath-Parameter of the X3D-Node.
With the X3D-Nodes backend-Parameter you can set Flash as default backend.</p>
<p>At the moment the Flash-backend is still in an early beta state with most of
base nodes working. Special features like multiple lights, shadows,
CommonSurfaceShader, etc. are being worked on</p>
<blockquote>
<div><ul class="simple">
<li>Internal reorganization of sources. Node type have now their own submodule
(src/nodes) and are split into groups.</li>
<li>Text node is partially working now. You can use any font available to the
browser. This includes WebFonts of CSS3.</li>
<li>Added system to pass parameters to runtime. The use attributes with the
X3D element will be deprecated in 1.3. Currently supported parameters</li>
<li>Partially working MT support with on Firefox beta. Experimental.</li>
<li>It is now possible to directly apply CSS styles to the X3D element.</li>
<li>Fixed display problem with textures which have dimensions not to the
power of two.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="verison-1-1">
<h4>Verison 1.1<a class="headerlink" href="#verison-1-1" title="Permalink to this headline">¶</a></h4>
<p>Second stable release after almost 7 month.</p>
<p><a class="reference external" href="http://x3dom.org/download/x3dom-v1.1.js">http://x3dom.org/download/x3dom-v1.1.js</a></p>
<p>Most features from the 1.1. milestone are implemented:</p>
<blockquote>
<div><ul class="simple">
<li>Unified HTML/XHTML encoding</li>
<li>HTML5 &lt;canvas&gt;, &lt;img&gt; and &lt;video&gt; as texture element supported</li>
<li>CSS 3D Transforms</li>
<li>Shader composition framework</li>
<li>multiple lights and support for Spot-, Point- and DirectionalLight</li>
<li>Fog</li>
<li>LOD</li>
<li>Support for large meshes</li>
<li>Improved normal generation</li>
<li>Follower component</li>
<li>WebGL compatibility</li>
<li>The proposed HTML profile is almost implemented</li>
<li>The fallback-model has changed a bit. We partially support X3D-SAI
plugins now and removed O3D as technology.</li>
</ul>
</div></blockquote>
<p>Recently there have been several changes in the WebGL-API (e.g. interface
changes in texImage2D() method, replacement of old WebGL array types with
the new TypedArray specification, enforcement of precision modifiers in
shader code, and changed behavior of NPOT textures). This leads to
incompatibilities with previous versions, why the 1.0 X3DOM release does
no longer work together with recent browser versions.</p>
</div>
<div class="section" id="version-1-0">
<h4>Version 1.0<a class="headerlink" href="#version-1-0" title="Permalink to this headline">¶</a></h4>
<p>First stable release of the framework.</p>
<p><a class="reference external" href="http://x3dom.org/download/x3dom-v1.0.js">http://x3dom.org/download/x3dom-v1.0.js</a></p>
<p>All initially planned features are implemented:</p>
<blockquote>
<div><ul class="simple">
<li>HTML / XHTML Support</li>
<li>Monitoring of DOM element add/remove and attribute change</li>
<li>JS-Scenegraph synchronizer</li>
<li>ROUTEs</li>
<li>DEF/USE support</li>
<li>External Subtree (via X3D Inline)</li>
<li>Image (Texture), Movie (Texture) and Sound (Emitter) support</li>
<li>Navigation: Examine</li>
<li>WebGL Render backend</li>
<li>The proposed HTML profile is partially implemented.</li>
</ul>
</div></blockquote>
<p><a class="reference external" href="http://www.x3dom.org/?p=781">Full release note</a></p>
</div>
</div>
<span id="document-license"></span><div class="section" id="license">
<span id="id1"></span><h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>X3DOM is dual licensed under the MIT and GPL licenses:</p>
<div class="highlight-python"><pre>==[MIT]====================================================================
Copyright (c) 2009 X3DOM

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.


==[GPL]====================================================================

X3DOM - Declarative 3D for HTML

Copyright (C) 2009 X3DOM

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</pre>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>About X3DOM</h3>
<p>
  X3DOM is an experimental open source framework and runtime to integrate HTML5 and declarative 3D content.
  You are currently looking at the documentation of the development version.  Things are
  not stable yet, but if you have some feedback, <a href="http://www.x3dom.org/?page_id=3">let us know</a>.
</p>

<h3>Other Versions</h3>
<p>You can view the documentation for different releases:</p>
<ul>
  <li><a href="http://readthedocs.org/docs/x3dom/en/latest/index.html">development</a></li>
  <li><a href="http://readthedocs.org/docs/x3dom/en/1.5.1/">1.5</a></li>
  <li><a href="http://readthedocs.org/docs/x3dom/en/1.4.0/">1.4</a></li>
  <li><a href="http://readthedocs.org/docs/x3dom/en/1.3.0/">1.3</a></li>
  <li><a href="http://readthedocs.org/docs/x3dom/en/1.2.0/">1.2</a></li>
</ul>

<h3>Other Formats</h3>
<p>
  You can download the documentation in other formats as well:
</p>
<ul>
  <li><a href="http://media.readthedocs.org/pdf/x3dom/latest/x3dom.pdf">as PDF</a></li>
  <li><a href="http://media.readthedocs.org/epub/x3dom/latest/x3dom.epub">as ePub</a></li>
</ul>
<p><small>by <a href="http://readthedocs.org">readthedocs.org</a></small></p>
<h3>Useful Links</h3>
<ul>
  <li><a href="http://x3dom.org/">The X3DOM Website</a></li>
  <li><a href="http://github.com/x3dom/x3dom/">Github repository</a></li>
  <li><a href="http://github.com/x3dom/x3dom/issues/">Issue Tracker</a></li>
  <li><a href="http://twitter.com/x3dom">Follow us on twitter</a></li>

</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2013, Fraunhofer IGD/VCST.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  
  </div>
  
<style>
    .internal-node-list ul,
    .internal-node-list, li {
        margin:0;
        padding:0;
    }
</style>
  </body>
</html>